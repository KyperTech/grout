{"version":3,"sources":["grout.min.js","/source/grout.js"],"names":["_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","_get","_x","_x2","_x3","_again","object","property","receiver","desc","parent","getter","undefined","Function","getOwnPropertyDescriptor","get","call","getPrototypeOf","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","global","factory","exports","module","require","define","amd","Grout","_","jwtDecode","superagent","AWS","Firebase","this","runConsoleMethod","methodName","methodData","console","apply","log","buildMessageArgs","logData","msgStr","msgObj","isObject","has","obj","func","file","each","omit","keys","ind","list","isString","msg","decodeToken","tokenStr","tokenData","err","____________logger","error","description","data","Error","handleResponse","req","Promise","resolve","reject","end","res","status","warn","body","addAuthHeader","token","string","set","info","message","_setAWSConfig","config","update","credentials","CognitoIdentityCredentials","IdentityPoolId","aws","cognito","poolId","region","setAWSConfig","childrenStructureFromArray","fileArray","mappedStructure","map","buildStructureObject","combineLikeObjs","pathArray","path","split","Key","pick","name","currentObj","type","finalObj","loc","first","join","children","$id","mappedArray","takenNames","finishedArray","indexOf","push","likeObj","findWhere","union","_config","serverUrl","tokenName","tokenDataName","tokenUserDataName","msgArgs","envName","debug","storage","item","itemName","itemValue","setItem","localExists","JSON","stringify","window","sessionStorage","getItem","itemStr","isObj","itemObj","parse","removeItem","clear","testKey","save","delete","___________request","endpoint","queryData","query","post","send","put","del","Matter","appName","opts","options","signupData","then","response","account","errRes","loginData","_this","password","username","text","_this2","currentUser","_this3","resove","isLoggedIn","responseData","updateData","_this4","checkGroups","_this5","isArray","isInGroups","_ret","groupName","groupsArray","v","groups","group","userGroups","any","_this6","isInGroup","localServer","url","location","host","userData","user","logger","request","fbUrl","matterOptions","params","AuthRoleArn","UnauthRoleArn","matter","__________request","utils","___________logger","Directory","actionData","directoryName","directoryEndpoint","directoryData","endpointArray","app","splice","endpointStr","_________request","__________logger","Group","groupData","groupEndpoint","accountsData","accountsArray","accounts","________request","_________logger","GroupsAction","action","providedData","groupsEndpoint","newGroupData","searchEndpoint","_______request","________logger","Account","accountData","extend","accountEndpoint","_______logger","AccountsAction","accountsEndpoint","newAccount","______request","______logger","Template","templateData","templateEndpoint","_____logger","_____request","TemplatesAction","templatesEndpoint","appData","____request","____logger","_DirectoriesAction","directoriesEndpoint","descrption","___logger","File","fileData","frontend","saveParams","Bucket","bucketName","contentType","ContentType","s3","getObject","Body","content","ACL","putObject","divId","re","ext","exec","__logger","Files","filesData","_this7","_ret2","S3","listParams","listObjects","Contents","filesArray","childStruct","childStructure","_request","_logger","_Application","owner","collaborators","createdAt","updatedAt","backend","directories","fbRef","appEndpoint","application","_this8","AppsAction","appsEndpoint","Application","_Matter","template","DirectoriesAction"],"mappings":"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","file":"grout.min.js","sourcesContent":[null,"(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('lodash'), require('jwt-decode'), require('superagent'), require('aws-sdk'), require('firebase')) :\n\ttypeof define === 'function' && define.amd ? define(['lodash', 'jwt-decode', 'superagent', 'aws-sdk', 'firebase'], factory) :\n\tglobal.Grout = factory(global._,global.jwtDecode,global.superagent,global.AWS,global.Firebase);\n}(this, function (_,jwtDecode,superagent,AWS,Firebase) { 'use strict';\n\n\t_ = 'default' in _ ? _['default'] : _;\n\tjwtDecode = 'default' in jwtDecode ? jwtDecode['default'] : jwtDecode;\n\tsuperagent = 'default' in superagent ? superagent['default'] : superagent;\n\tAWS = 'default' in AWS ? AWS['default'] : AWS;\n\tFirebase = 'default' in Firebase ? Firebase['default'] : Firebase;\n\n\tlet _config = {\n\t\tserverUrl: 'http://tessellate.elasticbeanstalk.com',\n\t\ttokenName: 'tessellate',\n\t\ttokenDataName: 'tessellate-tokenData',\n\t\ttokenUserDataName: 'tessellate-currentUser'\n\t};\n\n\tlet ____________logger = {\n\t\tlog(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (_config.envName == 'production') {\n\t\t\t\trunConsoleMethod('log', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('log', msgArgs);\n\t\t\t}\n\t\t},\n\t\tinfo(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (_config.envName == 'production') {\n\t\t\t\trunConsoleMethod('info', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('info', msgArgs);\n\t\t\t}\n\t\t},\n\t\twarn(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (_config.envName == 'production') {\n\t\t\t\trunConsoleMethod('warn', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('warn', msgArgs);\n\t\t\t}\n\t\t},\n\t\tdebug(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (_config.envName == 'production') {\n\t\t\t\t// runConsoleMethod('debug', msgArgs);\n\t\t\t\t//Do not display console debugs in production\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('debug', msgArgs);\n\t\t\t}\n\t\t},\n\t\terror(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (_config.envName == 'production') {\n\t\t\t\t//TODO: Log to external logger\n\t\t\t\trunConsoleMethod('error', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('error', msgArgs);\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction runConsoleMethod(methodName, methodData) {\n\t\t//Safley run console methods or use console log\n\t\tif (methodName && console[methodName]) {\n\t\t\treturn console[methodName].apply(console, methodData);\n\t\t} else {\n\t\t\treturn console.log.apply(console, methodData);\n\t\t}\n\t}\n\tfunction buildMessageArgs(logData) {\n\t\tvar msgStr = '';\n\t\tvar msgObj = {};\n\t\t//TODO: Attach time stamp\n\t\tif (_.isObject(logData)) {\n\t\t\tif (_.has(logData, 'func')) {\n\t\t\t\tif (_.has(logData, 'obj')) {\n\t\t\t\t\tmsgStr += '[' + logData.obj + '.' + logData.func + '()] ';\n\t\t\t\t} else if (_.has(logData, 'file')) {\n\t\t\t\t\tmsgStr += '[' + logData.file + ' > ' + logData.func + '()] ';\n\t\t\t\t} else {\n\t\t\t\t\tmsgStr += '[' + logData.func + '()] ';\n\t\t\t\t}\n\t\t\t}\n\t\t\t//Print each key and its value other than obj and func\n\t\t\t_.each(_.omit(_.keys(logData)), function(key, ind, list) {\n\t\t\t\tif (key != 'func' && key != 'obj') {\n\t\t\t\t\tif (key == 'description' || key == 'message') {\n\t\t\t\t\t\tmsgStr += logData[key];\n\t\t\t\t\t} else if (_.isString(logData[key])) {\n\t\t\t\t\t\t// msgStr += key + ': ' + logData[key] + ', ';\n\t\t\t\t\t\tmsgObj[key] = logData[key];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//Print objects differently\n\t\t\t\t\t\t// msgStr += key + ': ' + logData[key] + ', ';\n\t\t\t\t\t\tmsgObj[key] = logData[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tmsgStr += '\\n';\n\t\t} else if (_.isString(logData)) {\n\t\t\tmsgStr = logData;\n\t\t}\n\t\tvar msg = [msgStr, msgObj];\n\n\t\treturn msg;\n\t}\n\n\tlet data = {};\n\tlet storage = {\n\t\tget localExists() {\n\t\t\tconst testKey = 'test';\n\t\t\tif (typeof window != 'undefined' && typeof window.sessionStorage != 'undefined') {\n\t\t\t\ttry {\n\t\t\t\t\twindow.sessionStorage.setItem(testKey, '1');\n\t\t\t\t\twindow.sessionStorage.removeItem(testKey);\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (err) {\n\t\t\t\t\t____________logger.error({description: 'Error saving to session storage', error: err,  obj: 'storage', func: 'localExists'});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley sets item to session storage.\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t * @param {String} itemValue The items value\n\t\t *\n\t\t */\n\t\titem(itemName, itemValue) {\n\t\t\treturn this.setItem(itemName, itemValue);\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley sets item to session storage. Alias: item()\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t * @param {String} itemValue The items value\n\t\t *\n\t\t */\n\t\tsetItem(itemName, itemValue) {\n\t\t\tdata[itemName] = itemValue;\n\t\t\tif (this.localExists) {\n\t\t\t\t//Convert object to string\n\t\t\t\tif (_.isObject(itemValue)) {\n\t\t\t\t\titemValue = JSON.stringify(itemValue);\n\t\t\t\t}\n\t\t\t\twindow.sessionStorage.setItem(itemName, itemValue);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @description\n\t\t * Safley gets an item from session storage. Alias: item()\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t *\n\t\t * @return {String}\n\t\t *\n\t\t */\n\t\tgetItem(itemName) {\n\t\t\tif (data[itemName]) {\n\t\t\t\treturn data[itemName];\n\t\t\t} else if (this.localExists) {\n\t\t\t\tlet itemStr = window.sessionStorage.getItem(itemName);\n\t\t\t\t//Check that str is not null before parsing\n\t\t\t\tif (itemStr) {\n\t\t\t\t\tlet isObj = false;\n\t\t\t\t\tlet itemObj = null;\n\t\t\t\t\t//Try parsing to object\n\t\t\t\t\ttry {\n\t\t\t\t\t\titemObj = JSON.parse(itemStr);\n\t\t\t\t\t\tisObj = true;\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t// logger.log({message: 'String could not be parsed.', error: err, func: 'getItem', obj: 'storage'});\n\t\t\t\t\t\t//Parsing failed, this must just be a string\n\t\t\t\t\t\tisObj = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (isObj) {\n\t\t\t\t\t\treturn itemObj;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn itemStr;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley removes item from session storage.\n\t\t *\n\t\t * @param {String} itemName - The items name\n\t\t *\n\t\t */\n\t\tremoveItem(itemName) {\n\t\t\t//TODO: Only remove used items\n\t\t\tif (data[itemName]) {\n\t\t\t\tdata[itemName] = null;\n\t\t\t}\n\t\t\tif (this.localExists) {\n\t\t\t\ttry {\n\t\t\t\t\t//Clear session storage\n\t\t\t\t\twindow.sessionStorage.removeItem(itemName);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t____________logger.error({description: 'Error removing item from session storage', error: err,  obj: 'storage', func: 'removeItem'});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley removes item from session storage.\n\t\t *\n\t\t * @param {String} itemName the items name\n\t\t * @param {String} itemValue the items value\n\t\t *\n\t\t */\n\t\tclear() {\n\t\t\t//TODO: Only remove used items\n\t\t\tdata = {};\n\t\t\tif (this.localExists) {\n\t\t\t\ttry {\n\t\t\t\t\t\t//Clear session storage\n\t\t\t\t\twindow.sessionStorage.clear();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t____________logger.warn('Session storage could not be cleared.', err);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t};\n\n\tfunction decodeToken(tokenStr) {\n\t\tlet tokenData;\n\t\tif (tokenStr && tokenStr != '') {\n\t\t\ttry {\n\t\t\t\ttokenData = jwtDecode(tokenStr);\n\t\t\t} catch (err) {\n\t\t\t\t____________logger.error({description: 'Error decoding token.', data: tokenData, error: err, func: 'decodeToken', file: 'token'});\n\t\t\t\tthrow new Error('Invalid token string.');\n\t\t\t}\n\t\t}\n\t\treturn tokenData;\n\t}\n\tlet token = {\n\t\tget string() {\n\t\t\treturn storage.getItem(_config.tokenName);\n\t\t},\n\t\tget data() {\n\t\t\tif (storage.getItem(_config.tokenDataName)) {\n\t\t\t\treturn storage.getItem(_config.tokenDataName);\n\t\t\t} else {\n\t\t\t\treturn decodeToken(this.string);\n\t\t\t}\n\t\t},\n\t\tset data(tokenData) {\n\t\t\tif (_.isString(tokenData)) {\n\t\t\t\tlet tokenStr = tokenData;\n\t\t\t\ttokenData = decodeToken(tokenStr);\n\t\t\t\t____________logger.info({description: 'Token data was set as string. Decoding token.', token: tokenStr, tokenData: tokenData, func: 'data', obj: 'token'});\n\t\t\t} else {\n\t\t\t\t____________logger.log({description: 'Token data was set.', data: tokenData, func: 'data', obj: 'token'});\n\t\t\t\tstorage.setItem(_config.tokenDataName, tokenData);\n\t\t\t}\n\t\t},\n\t\tset string(tokenStr) {\n\t\t\t____________logger.log({description: 'Token was set.', token: tokenStr, func: 'string', obj: 'token'});\n\t\t\tthis.data = jwtDecode(tokenStr);\n\t\t\tstorage.setItem(_config.tokenName, tokenStr);\n\t\t},\n\t\tsave(tokenStr) {\n\t\t\tthis.string = tokenStr;\n\t\t},\n\t\tdelete() {\n\t\t\tstorage.removeItem(_config.tokenName);\n\t\t\tstorage.removeItem(_config.tokenDataName);\n\t\t\t____________logger.log({description: 'Token was removed.', func: 'delete', obj: 'token'});\n\t\t}\n\t};\n\n\tlet ___________request = {\n\t\tget(endpoint, queryData) {\n\t\t\tvar req = superagent.get(endpoint);\n\t\t\tif (queryData) {\n\t\t\t\treq.query(queryData);\n\t\t\t}\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tpost(endpoint, data) {\n\t\t\tvar req = superagent.post(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tput(endpoint, data) {\n\t\t\tvar req = superagent.put(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tdel(endpoint, data) {\n\t\t\tvar req = superagent.put(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t}\n\t};\n\n\tfunction handleResponse(req) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treq.end((err, res) => {\n\t\t\t\tif (!err) {\n\t\t\t\t\t// logger.log({description: 'Response:', response:res, func:'handleResponse', file: 'request'});\n\t\t\t\t\treturn resolve(res.body);\n\t\t\t\t} else {\n\t\t\t\t\tif (err.status == 401) {\n\t\t\t\t\t\tconsole.warn('Unauthorized. You must be signed into make this request.');\n\t\t\t\t\t}\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tfunction addAuthHeader(req) {\n\t\tif (token.string) {\n\t\t\treq = req.set('Authorization', 'Bearer ' + token.string);\n\t\t\tconsole.info({message: 'Set auth header', func: 'addAuthHeader', file: 'request'});\n\t\t}\n\t\treturn req;\n\t}\n\n\tclass Matter {\n\t\t/* Constructor\n\t\t * @param {string} appName Name of application\n\t\t */\n\t\tconstructor(appName, opts) {\n\t\t\tif (!appName) {\n\t\t\t\t____________logger.error({description: 'Application name requires to use Matter.', func: 'constructor', obj: 'Matter'});\n\t\t\t\tthrow new Error('Application name is required to use Matter');\n\t\t\t} else {\n\t\t\t\tthis.name = appName;\n\t\t\t}\n\t\t\tif (opts) {\n\t\t\t\tthis.options = opts;\n\t\t\t}\n\t\t}\n\t\t/* Endpoint getter\n\t\t *\n\t\t */\n\t\tget endpoint() {\n\t\t\tlet serverUrl = _config.serverUrl;\n\t\t\tif (_.has(this, 'options') && this.options.localServer) {\n\t\t\t\tserverUrl = 'http://localhost:4000';\n\t\t\t\t____________logger.info({description: 'LocalServer option was set to true. Now server url is local server.', url: serverUrl, func: 'endpoint', obj: 'Matter'});\n\t\t\t}\n\t\t\tif (this.name == 'tessellate') {\n\t\t\t\t//Remove url if host is server\n\t\t\t\tif (window && _.has(window, 'location') && window.location.host == serverUrl) {\n\t\t\t\t\tserverUrl = '';\n\t\t\t\t\t____________logger.info({description: 'Host is Server, serverUrl simplified!', url: serverUrl, func: 'endpoint', obj: 'Matter'});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tserverUrl = _config.serverUrl + '/apps/' + this.name;\n\t\t\t\t____________logger.info({description: 'Server url set.', url: serverUrl, func: 'endpoint', obj: 'Matter'});\n\t\t\t}\n\t\t\treturn serverUrl;\n\t\t}\n\t\t/* Signup\n\t\t *\n\t\t */\n\t\tsignup(signupData) {\n\t\t\treturn ___________request.post(this.endpoint + '/signup', signupData)\n\t\t\t.then((response) => {\n\t\t\t\t____________logger.log({description: 'Account request successful.', signupData: signupData, response: response, func: 'signup', obj: 'Matter'});\n\t\t\t\tif (_.has(response, 'account')) {\n\t\t\t\t\treturn response.account;\n\t\t\t\t} else {\n\t\t\t\t\t____________logger.warn({description: 'Account was not contained in signup response.', signupData: signupData, response: response, func: 'signup', obj: 'Matter'});\n\t\t\t\t\treturn response;\n\t\t\t\t}\n\t\t\t})\n\t\t\t['catch']((errRes) => {\n\t\t\t\t____________logger.error({description: 'Error requesting signup.', signupData: signupData, error: errRes, func: 'signup', obj: 'Matter'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t/** Login\n\t\t *\n\t\t */\n\t\tlogin(loginData) {\n\t\t\tif (!loginData || !loginData.password || !loginData.username) {\n\t\t\t\t____________logger.error({description: 'Username/Email and Password are required to login', func: 'login', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Username/Email and Password are required to login'});\n\t\t\t}\n\t\t\treturn ___________request.put(this.endpoint + '/login', loginData)\n\t\t\t.then((response) => {\n\t\t\t\tif (_.has(response, 'data') && _.has(response.data, 'status') && response.data.status == 409) {\n\t\t\t\t\t____________logger.warn({description: 'Account not found.', response: response, func: 'login', obj: 'Matter'});\n\t\t\t\t\treturn Promise.reject(response.data);\n\t\t\t\t} else {\n\t\t\t\t\t____________logger.log({description: 'Successful login.', response: response, func: 'login', obj: 'Matter'});\n\t\t\t\t\tif (_.has(response, 'token')) {\n\t\t\t\t\t\tthis.token.string = response.token;\n\t\t\t\t\t}\n\t\t\t\t\tif (_.has(response, 'account')) {\n\t\t\t\t\t\tthis.storage.setItem(_config.tokenUserDataName, response.account);\n\t\t\t\t\t}\n\t\t\t\t\treturn response.account;\n\t\t\t\t}\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t____________logger.error({description: 'Error requesting login.', error: errRes, status: errRes.status,  func: 'login', obj: 'Matter'});\n\t\t\t\tif (errRes.status == 409 || errRes.status == 400) {\n\t\t\t\t\terrRes = errRes.response.text;\n\t\t\t\t}\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t/** Logout\n\t\t */\n\t\tlogout() {\n\t\t\treturn ___________request.put(this.endpoint + '/logout').then((response) => {\n\t\t\t\t____________logger.log({description: 'Logout successful.', response: response, func: 'logout', obj: 'Matter'});\n\t\t\t\tthis.currentUser = null;\n\t\t\t\tthis.token.delete();\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t____________logger.error({description: 'Error requesting log out: ', error: errRes, func: 'logout', obj: 'Matter'});\n\t\t\t\tthis.storage.removeItem(_config.tokenUserDataName);\n\t\t\t\tthis.token.delete();\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\tgetCurrentUser() {\n\t\t\tif (this.storage.item(_config.tokenUserDataName)) {\n\t\t\t\treturn Promise.resove(this.storage.getItem(_config.tokenUserDataName));\n\t\t\t} else {\n\t\t\t\tif (this.isLoggedIn) {\n\t\t\t\t\treturn ___________request.get(this.endpoint + '/user').then((response) => {\n\t\t\t\t\t\t//TODO: Save user information locally\n\t\t\t\t\t\t____________logger.log({description: 'Current User Request responded.', responseData: response, func: 'currentUser', obj: 'Matter'});\n\t\t\t\t\t\tthis.currentUser = response;\n\t\t\t\t\t\treturn response;\n\t\t\t\t\t})['catch']((errRes) => {\n\t\t\t\t\t\tif (err.status == 401) {\n\t\t\t\t\t\t\t____________logger.warn({description: 'Called for current user without token.', error: errRes, func: 'currentUser', obj: 'Matter'});\n\t\t\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t____________logger.error({description: 'Error requesting current user.', error: errRes, func: 'currentUser', obj: 'Matter'});\n\t\t\t\t\t\t\treturn Promise.reject(errRes);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tset currentUser(userData) {\n\t\t\t____________logger.log({description: 'Current User set.', user: userData, func: 'currentUser', obj: 'Matter'});\n\t\t\tthis.storage.setItem(_config.tokenUserDataName, userData);\n\t\t}\n\t\tget currentUser() {\n\t\t\tif (this.storage.getItem(_config.tokenUserDataName)) {\n\t\t\t\treturn this.storage.getItem(_config.tokenUserDataName);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\t/** updateProfile\n\t\t */\n\t\tupdateProfile(updateData) {\n\t\t\tif (!this.isLoggedIn) {\n\t\t\t\t____________logger.error({description: 'No current user profile to update.', func: 'updateProfile', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Must be logged in to update profile.'});\n\t\t\t}\n\t\t\t//Send update request\n\t\t\t____________logger.warn({description: 'Calling update endpoint.', endpoint: `${this.endpoint}/user/${this.token.data.username}` , func: 'updateProfile', obj: 'Matter'});\n\t\t\treturn ___________request.put(`${this.endpoint}/user/${this.token.data.username}` , updateData).then((response) => {\n\t\t\t\t____________logger.log({description: 'Update profile request responded.', responseData: response, func: 'updateProfile', obj: 'Matter'});\n\t\t\t\tthis.currentUser = response;\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t____________logger.error({description: 'Error requesting current user.', error: errRes, func: 'updateProfile', obj: 'Matter'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t/** updateProfile\n\t\t */\n\t\tget storage() {\n\t\t\treturn storage;\n\t\t}\n\t\t/** updateProfile\n\t\t */\n\t\tget token() {\n\t\t\treturn token;\n\t\t}\n\t\tget utils() {\n\t\t\treturn {logger: ____________logger, request: ___________request, storage: storage};\n\t\t}\n\t\tget isLoggedIn() {\n\t\t\treturn this.token.string ? true : false;\n\t\t}\n\t\t//Check that user is in a single group or in all of a list of groups\n\t\tisInGroup(checkGroups) {\n\t\t\tif (!this.isLoggedIn) {\n\t\t\t\t____________logger.log({description: 'No logged in user to check.', func: 'isInGroup', obj: 'Matter'});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//Check if user is\n\t\t\tif (checkGroups && _.isString(checkGroups)) {\n\t\t\t\tlet groupName = checkGroups;\n\t\t\t\t//Single role or string list of roles\n\t\t\t\tlet groupsArray = groupName.split(',');\n\t\t\t\tif (groupsArray.length > 1) {\n\t\t\t\t\t//String list of groupts\n\t\t\t\t\t____________logger.info({description: 'String list of groups.', list: groupsArray, func: 'isInGroup', obj: 'Matter'});\n\t\t\t\t\treturn this.isInGroups(groupsArray);\n\t\t\t\t} else {\n\t\t\t\t\t//Single group\n\t\t\t\t\tlet groups = this.token.data.groups || [];\n\t\t\t\t\t____________logger.log({description: 'Checking if user is in group.', group: groupName, userGroups: this.token.data.groups || [],  func: 'isInGroup', obj: 'Matter'});\n\t\t\t\t\treturn _.any(groups, (group) =>  {\n\t\t\t\t\t\treturn groupName == group.name;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (checkGroups && _.isArray(checkGroups)) {\n\t\t\t\t//Array of roles\n\t\t\t\t//Check that user is in every group\n\t\t\t\t____________logger.info({description: 'Array of groups.', list: checkGroups, func: 'isInGroup', obj: 'Matter'});\n\t\t\t\treturn this.isInGroups(checkGroups);\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//TODO: Handle string and array inputs\n\t\t}\n\t\tisInGroups(checkGroups) {\n\t\t\t//Check if user is in any of the provided groups\n\t\t\tif (checkGroups && _.isArray(checkGroups)) {\n\t\t\t\treturn _.map(checkGroups, (group) =>  {\n\t\t\t\t\tif (_.isString(group)) {\n\t\t\t\t\t\t//Group is string\n\t\t\t\t\t\treturn this.isInGroup(group);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//Group is object\n\t\t\t\t\t\treturn this.isInGroup(group.name);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (checkGroups && _.isString(checkGroups)) {\n\t\t\t\t//TODO: Handle spaces within string list\n\t\t\t\tlet groupsArray = checkGroups.split(',');\n\t\t\t\tif (groupsArray.length > 1) {\n\t\t\t\t\treturn this.isInGroups(groupsArray);\n\t\t\t\t}\n\t\t\t\treturn this.isInGroup(groupsArray[0]);\n\t\t\t} else {\n\t\t\t\t____________logger.error({description: 'Invalid groups list.', func: 'isInGroups', obj: 'Matter'});\n\t\t\t}\n\t\t}\n\t}\n\n\tlet config = {\n\t\tserverUrl: 'http://tessellate.elasticbeanstalk.com',\n\t\ttokenName: 'grout',\n\t\tfbUrl: 'https://pruvit.firebaseio.com/',\n\t\tappName: 'tessellate',\n\t\tmatterOptions: {\n\t\t\tlocalServer: true\n\t\t},\n\t\taws: {\n\t\t\tregion: 'us-east-1',\n\t\t\tcognito: {\n\t\t\t\tpoolId: 'us-east-1:72a20ffd-c638-48b0-b234-3312b3e64b2e',\n\t\t\t\tparams: {\n\t\t\t\t\tAuthRoleArn: 'arn:aws:iam::823322155619:role/Cognito_TessellateUnauth_Role',\n\t\t\t\t\tUnauthRoleArn: 'arn:aws:iam::823322155619:role/Cognito_TessellateAuth_Role'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tlet matter = new Matter(config.appName, config.matterOptions);\n\n\tlet __________request = matter.utils.request;\n\tlet ___________logger = matter.utils.logger;\n\n\t//Actions for specific directory\n\tclass Directory {\n\t\tconstructor(actionData) {\n\t\t\tif (actionData && _.isObject(actionData) && (_.has(actionData, 'directoryName') || _.has(actionData, 'name'))) { //Data is object containing directory data\n\t\t\t\tthis.name = actionData.directoryName || actionData.name;\n\t\t\t\tif (_.has(actionData, 'appName')) {\n\t\t\t\t\tthis.appName = actionData.appName;\n\t\t\t\t}\n\t\t\t} else if (actionData && _.isString(actionData)) { //Data is string name\n\t\t\t\tthis.name = actionData;\n\t\t\t} else {\n\t\t\t\t___________logger.error({description: 'Action data object with name is required to start a Directory Action.', func: 'constructor', obj: 'Directory'});\n\t\t\t\tthrow new Error('Directory Data object with name is required to start a Directory action.');\n\t\t\t}\n\t\t}\n\t\tget directoryEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'directories', this.name];\n\t\t\t//Check for app account action\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\tendpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t___________logger.log({description: 'Directory endpoint built.', endpoint: endpointStr, func: 'directoryEndpoint', obj: 'Directory'});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get userlications or single userlication\n\t\tget() {\n\t\t\treturn __________request.get(this.directoryEndpoint).then((response) => {\n\t\t\t\t___________logger.info({description: 'Directory data loaded successfully.', directoryData: directoryData, response: response, func: 'get', obj: 'Directory'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t___________logger.info({description: 'Error getting directory.', directoryData: directoryData, error: errRes, func: 'get', obj: 'Directory'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Update an Directory\n\t\tupdate(directoryData) {\n\t\t\t___________logger.debug({description: 'Directory updated called.', directoryData: directoryData, func: 'update', obj: 'Directory'});\n\t\t\treturn matter.utils.request.put(this.directoryEndpoint, directoryData).then((response) => {\n\t\t\t\t___________logger.info({description: 'Directory updated successfully.', directoryData: directoryData, response: response, func: 'update', obj: 'Directory'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t___________logger.error({description: 'Error updating directory.', directoryData: directoryData, error: errRes, func: 'update', obj: 'Directory'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Delete an Directory\n\t\tdel(directoryData) {\n\t\t\t___________logger.debug({description: 'Delete directory called.', directoryData: directoryData, func: 'del', obj: 'Directory'});\n\t\t\treturn __________request.delete(this.directoryEndpoint, userData).then((response) => {\n\t\t\t\t___________logger.info({description: 'Directory deleted successfully.', directoryData: directoryData, func: 'del', obj: 'Directory'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t___________logger.error({description: 'Error deleting directory.', directoryData: directoryData, error: errRes, func: 'del', obj: 'Directory'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\tlet _________request = matter.utils.request;\n\tlet __________logger = matter.utils.logger;\n\n\t//Actions for specific user\n\tclass Group {\n\t\tconstructor(actionData) {\n\t\t\t//Call matter with name and settings\n\t\t\tif (actionData && _.isObject(actionData) && _.has(actionData, 'groupData')) { //Data is object containing group data\n\t\t\t\tthis.name = _.isObject(actionData.groupData) ? actionData.groupData.name : actionData.groupData;\n\t\t\t\tif (_.has(actionData, 'app')) {\n\t\t\t\t\tthis.app = actionData.app;\n\t\t\t\t}\n\t\t\t} else if (actionData && _.isString(actionData)) { //Data is string name\n\t\t\t\tthis.name = actionData;\n\t\t\t} else {\n\t\t\t\t__________logger.error({description: 'Action data is required to start a Group Action.', func: 'constructor', obj: 'Group'});\n\t\t\t\tthrow new Error('Username is required to start an Group');\n\t\t\t}\n\t\t}\n\t\tget groupEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'groups', this.name];\n\t\t\t//Check for app account action\n\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\tendpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t__________logger.log({description: 'Group Endpoint built.', endpoint: endpointStr, func: 'groupEndpoint', obj: 'Group'});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get userlications or single userlication\n\t\tget() {\n\t\t\treturn _________request.get(this.groupEndpoint).then((response) => {\n\t\t\t\t__________logger.info({description: 'Group data loaded successfully.', response: response, func: 'get', obj: 'Group'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t__________logger.info({description: 'Error getting group.', error: errRes, func: 'get', obj: 'Group'});\n\t\t\t\treturn Promise.reject(errRes.response.text || errRes.response);\n\t\t\t});\n\t\t}\n\t\t//Update an Group\n\t\tupdate(groupData) {\n\t\t\t__________logger.log({description: 'Group updated called.', groupData: groupData, func: 'update', obj: 'Group'});\n\t\t\treturn matter.utils.request.put(this.groupEndpoint, groupData).then((response) => {\n\t\t\t\t__________logger.info({description: 'Group updated successfully.', groupData: groupData, response: response, func: 'update', obj: 'Group'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t__________logger.error({description: 'Error updating group.', groupData: groupData, error: errRes, func: 'update', obj: 'Group'});\n\t\t\t\treturn Promise.reject(errRes.response.text || errRes.response);\n\t\t\t});\n\t\t}\n\t\t//Delete an Group\n\t\tdel(groupData) {\n\t\t\t__________logger.log({description: 'Delete group called.', groupData: groupData, func: 'del', obj: 'Group'});\n\t\t\treturn _________request.del(this.groupEndpoint, {}).then((response) => {\n\t\t\t\t__________logger.info({description: 'Group deleted successfully.', groupData: groupData, func: 'del', obj: 'Group'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t__________logger.error({description: 'Error deleting group.', error: errRes, text: errRes.response.text, groupData: groupData,  func: 'del', obj: 'Group'});\n\t\t\t\treturn Promise.reject(errRes.response.text || errRes.response);\n\t\t\t});\n\t\t}\n\t\t//Update an Group\n\t\taddAccounts(accountsData) {\n\t\t\t__________logger.log({description: 'Group updated called.', accountsData: accountsData, func: 'update', obj: 'Group'});\n\t\t\tlet accountsArray = accountsData;\n\t\t\t//Handle provided data being a string list\n\t\t\tif (_.isString(accountsData)) {\n\t\t\t\taccountsArray = accountsData.split(',');\n\t\t\t}\n\t\t\t//Check item in array to see if it is a string (username) instead of _id\n\t\t\tif (_.isString(accountsArray[0])) {\n\t\t\t\t__________logger.error({description: 'Accounts array only currently supports account._id not account.username.', accountsData: accountsData, func: 'update', obj: 'Group'});\n\t\t\t\treturn Promise.reject({message: 'Accounts array only currently supports account._id not account.username.'});\n\t\t\t}\n\t\t\t__________logger.log({description: 'Updating group with accounts array.', accountsArray: accountsArray, func: 'update', obj: 'Group'});\n\t\t\treturn this.update({accounts: accountsArray}).then((response) => {\n\t\t\t\t__________logger.info({description: 'Account(s) added to group successfully.', response: response, func: 'addAccounts', obj: 'Group'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t__________logger.error({description: 'Error addAccountseting group.', error: errRes,  func: 'addAccounts', obj: 'Group'});\n\t\t\t\treturn Promise.reject(errRes.response.text || errRes.response);\n\t\t\t});\n\t\t}\n\t}\n\n\tlet ________request = matter.utils.request;\n\tlet _________logger = matter.utils.logger;\n\n\t//Actions for users list\n\tclass GroupsAction {\n\t\tconstructor(actionData) {\n\t\t\t//Check to see if action is for a specific app\n\t\t\tif (actionData && _.isObject(actionData) && _.has(actionData, 'app')) {\n\t\t\t\tthis.app = actionData.app;\n\t\t\t\t_________logger.log({description: 'Provided app data set to app parameter.', action: this, providedData: actionData, func: 'constructor', obj: 'GroupsAction'});\n\t\t\t} else if (actionData && _.isString(actionData)) {\n\t\t\t\tthis.app = {name: actionData};\n\t\t\t\t_________logger.log({description: 'App name provided as string was set.', action: this, providedData: actionData, func: 'constructor', obj: 'GroupsAction'});\n\t\t\t} else {\n\t\t\t\t_________logger.error({description: 'Error creating new Groups action.', action: this, providedData: actionData, func: 'constructor', obj: 'GroupsAction'});\n\t\t\t}\n\t\t}\n\t\tget groupsEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'groups'];\n\t\t\t//Check for app groups action\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\tendpointArray = endpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t_________logger.log({description: 'Groups Endpoint built.', endpoint: endpointStr, func: 'groupsEndpoint', obj: 'GroupsAction'});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get users or single application\n\t\tget() {\n\t\t\t_________logger.debug({description: 'Get group called.', func: 'get', obj: 'GroupsAction'});\n\t\t\treturn ________request.get(this.groupsEndpoint).then((response) => {\n\t\t\t\t_________logger.info({description: 'Groups loaded successfully.', response: response, func: 'get', obj: 'GroupsAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_________logger.info({description: 'Error getting groups.', error: errRes, func: 'get', obj: 'GroupsAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Add an application\n\t\tadd(groupData) {\n\t\t\tvar newGroupData = groupData;\n\t\t\t_________logger.debug({description: 'Add group called.', groupData: groupData, func: 'add', obj: 'GroupsAction'});\n\t\t\tif (_.isString(groupData)) {\n\t\t\t\t//Group data is string\n\t\t\t\tnewGroupData = {name: groupData};\n\t\t\t}\n\t\t\t_________logger.debug({description: 'Add group called.', newGroupData: newGroupData, func: 'add', obj: 'GroupsAction'});\n\t\t\treturn ________request.post(this.groupsEndpoint, newGroupData).then((response) => {\n\t\t\t\t_________logger.log({description: 'Group added to application successfully.', response: response, func: 'add', obj: 'GroupsAction'});\n\t\t\t\t//TODO: Return list of group objects\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_________logger.error({description: 'Error adding group.', error: errRes, func: 'add', obj: 'GroupsAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Search with partial of username\n\t\tsearch(query) {\n\t\t\t_________logger.debug({description: 'Add group called.', groupData: groupData, func: 'search', obj: 'GroupsAction'});\n\t\t\tif (!query || query == '' || !_.isString(query)) {\n\t\t\t\t_________logger.log({description: 'Null or invalid query, returning empty array.', func: 'search', obj: 'GroupsAction'});\n\t\t\t\treturn Promise.resolve([]);\n\t\t\t}\n\t\t\tlet searchEndpoint = `${this.groupsEndpoint}/search/${query}`;\n\t\t\t_________logger.debug({description: 'Search endpoint created.', endpoint: searchEndpoint, func: 'search', obj: 'GroupsAction'});\n\t\t\treturn ________request.get(searchEndpoint).then((response) => {\n\t\t\t\t_________logger.log({description: 'Found groups based on search.', response: response, func: 'search', obj: 'GroupsAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_________logger.error({description: 'Error searching groups.', error: errRes, func: 'search', obj: 'GroupsAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\tlet _______request = matter.utils.request;\n\tlet ________logger = matter.utils.logger;\n\n\t//Actions for specific user\n\tclass Account {\n\t\tconstructor(accountData) {\n\t\t\t//Call matter with name and settings\n\t\t\tif (accountData && _.isObject(accountData) && _.has(accountData, 'username')) {\n\t\t\t\t_.extend(this, accountData);\n\t\t\t} else if (accountData && _.isString(accountData)) {\n\t\t\t\tthis.username = accountData;\n\t\t\t} else {\n\t\t\t\t________logger.error({description: 'AccountData is required to start an AccountAction', func: 'constructor', obj: 'Account'});\n\t\t\t\tthrow new Error('username is required to start an AccountAction');\n\t\t\t}\n\t\t}\n\t\t//Build endpoint based on accountData\n\t\tget accountEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'users', this.username];\n\t\t\t//Check for app account action\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\tendpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t________logger.log({description: 'Account Endpoint built.', endpoint: endpointStr, func: 'accountEndpoint', obj: 'Account'});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get a user\n\t\tget() {\n\t\t\t________logger.debug({description: 'Account data loaded successfully.', func: 'get', obj: 'Account'});\n\t\t\treturn _______request.get(this.accountEndpoint).then((response) => {\n\t\t\t\t________logger.info({description: 'Account data loaded successfully.', response: response, func: 'get', obj: 'Account'});\n\t\t\t\treturn new Account(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t________logger.error({description: 'Error getting user.', error: errRes, func: 'get', obj: 'Account'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Update a Account\n\t\tupdate(accountData) {\n\t\t\t________logger.debug({description: 'Update user called.', accountData: accountData, func: 'update', obj: 'Account'});\n\t\t\treturn _______request.put(this.accountEndpoint, accountData).then((response) => {\n\t\t\t\t________logger.info({description: 'Account updated successfully.', func: 'update', obj: 'Account'});\n\t\t\t\t//TODO: Extend this with current info before returning\n\t\t\t\treturn new Account(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t________logger.error({description: 'Error updating user.', func: 'update', obj: 'Account'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Delete a Account\n\t\tdel(accountData) {\n\t\t\t________logger.debug({description: 'Delete user called.', func: 'del', obj: 'Account'});\n\t\t\treturn _______request.delete(this.accountEndpoint, accountData).then((response) => {\n\t\t\t\t________logger.info({description: 'Delete user successful.', response: response, func: 'del', obj: 'Account'});\n\t\t\t\treturn new Account(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t________logger.error({description: 'Error deleting user.', accountData: accountData, error: errRes, func: 'del', obj: 'Account'});\n\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\tlet _______logger = matter.utils.logger;\n\t//Actions for accounts list\n\tclass AccountsAction {\n\t\tconstructor(actionData) {\n\t\t\t//Check to see if action is for a specific app\n\t\t\tif (actionData && _.isObject(actionData) && _.has(actionData, 'app')) {\n\t\t\t\tthis.app = actionData.app;\n\t\t\t\t_______logger.log({description: 'Provided app data set to app parameter.', action: this, providedData: actionData, func: 'constructor', obj: 'AccountsAction'});\n\t\t\t} else if (actionData && _.isString(actionData)) {\n\t\t\t\tthis.app = {name: actionData};\n\t\t\t\t_______logger.log({description: 'App name provided as string was set.', action: this, providedData: actionData, func: 'constructor', obj: 'AccountsAction'});\n\t\t\t} else {\n\t\t\t\t_______logger.log({description: 'New Accounts action.', action: this, providedData: actionData, func: 'constructor', obj: 'AccountsAction'});\n\t\t\t}\n\t\t}\n\t\tget accountsEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'accounts'];\n\t\t\t//Check for app account action\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\t//Splice apps, appName into index 1\n\t\t\t\tendpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t_______logger.log({description: 'Accounts Endpoint built.', endpoint: endpointStr, func: 'accountsEndpoint', obj: 'AccountsAction'});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get accounts or single application\n\t\tget() {\n\t\t\t_______logger.log({description: 'Accounts get called.', func: 'get', obj: 'AccountsAction'});\n\t\t\treturn matter.utils.request.get(this.accountsEndpoint).then((response) => {\n\t\t\t\t_______logger.info({description: 'Accounts loaded successfully.', func: 'get', obj: 'AccountsAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_______logger.info({description: 'Error getting accounts.', error: errRes, func: 'get', obj: 'AccountsAction'});\n\t\t\t\treturn Promise.reject(errRes.message || 'Error getting accounts.');\n\t\t\t});\n\t\t}\n\t\t//Add an application\n\t\tadd(accountData) {\n\t\t\t_______logger.info({description: 'Account add called.', accountData: accountData, func: 'add', obj: 'AccountsAction'});\n\t\t\treturn this.utils.request.post(this.accountsEndpoint, accountData).then((response) => {\n\t\t\t\t_______logger.info({description: 'Account added successfully.', response: response, newAccount: new Account(response), func: 'add', obj: 'AccountsAction'});\n\t\t\t\treturn new Account(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_______logger.error({description: 'Account add called.', error: errRes, accountData: accountData, func: 'add', obj: 'AccountsAction'});\n\t\t\t\treturn Promise.reject(errRes.message || 'Error adding account.');\n\t\t\t});\n\t\t}\n\t\t//Search with partial of accountname\n\t\tsearch(query) {\n\t\t\t_______logger.log({description: 'Accounts search called.', query: query, func: 'search', obj: 'AccountsAction'});\n\t\t\tvar searchEndpoint = this.accountsEndpoint + '/search/';\n\t\t\tif (query && _.isString(query)) {\n\t\t\t\tsearchEndpoint += query;\n\t\t\t}\n\t\t\tif (!query || query == '') {\n\t\t\t\t_______logger.log({description: 'Null query, returning empty array.', func: 'search', obj: 'AccountsAction'});\n\t\t\t\treturn Promise.resolve([]);\n\t\t\t}\n\t\t\treturn matter.utils.request.get(searchEndpoint).then((response) => {\n\t\t\t\t_______logger.log({description: 'Accounts search responded.', response: response, query: query, func: 'search', obj: 'AccountsAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_______logger.error({description: 'Error searching Accounts.', error: errRes, query: query, func: 'search', obj: 'AccountsAction'});\n\t\t\t\treturn Promise.reject(errRes.message || 'Error searching accounts.');\n\t\t\t});\n\t\t}\n\t}\n\n\tlet ______request = matter.utils.request;\n\tlet ______logger = matter.utils.logger;\n\t//Actions for specific user\n\tclass Template {\n\t\tconstructor(templateData) {\n\t\t\t//Call matter with name and settings\n\t\t\tif (templateData && _.isString(templateData)) {\n\t\t\t\tthis.name = templateData;\n\t\t\t} else {\n\t\t\t\t______logger.error({description: 'Template data is required to start a Template action.', func: 'construcotr', obj: ''});\n\t\t\t\tthrow new Error('Template data is required to start a Template action.');\n\t\t\t}\n\t\t}\n\t\tget templateEndpoint() {\n\t\t\treturn `${matter.endpoint}/templates/${this.name}`;\n\t\t}\n\t\t//Get userlications or single userlication\n\t\tget() {\n\t\t\t______logger.log({description: 'Get template called.', name: this.name, func: 'get', obj: 'Template'});\n\t\t\treturn ______request.get(this.templateEndpoint).then((response) => {\n\t\t\t\t______logger.log({description: 'Get template responded.', response: response, func: 'get', obj: 'Template'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t______logger.error({description: 'Error getting template.', error: errRes, func: 'get', obj: 'Template'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Update an userlication\n\t\tupdate(templateData) {\n\t\t\t______logger.log({description: 'Update template called.', templateData: templateData, func: 'update', obj: 'Template'});\n\t\t\treturn ______request.put(this.templateEndpoint, templateData).then((response) => {\n\t\t\t\t______logger.log({description: 'Update template responded.', response: response, templateData: templateData, func: 'update', obj: 'Template'});\n\t\t\t\t//TODO: Return template object\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t______logger.error({description: 'Error updating template.', error: errRes, func: 'update', obj: 'Template'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Delete a template\n\t\tdel(templateData) {\n\t\t\t______logger.log({description: 'Delete template called.', templateData: templateData, func: 'del', obj: 'Template'});\n\t\t\treturn ______request.delete(this.endpoint, templateData).then((response) => {\n\t\t\t\t______logger.log({description: 'Template deleted successfully.', response: response, func: 'del', obj: 'Template'});\n\t\t\t\t//TODO: Return template object\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t______logger.error({description: 'Error deleting template.', error: errRes, func: 'del', obj: 'Template'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\tlet _____logger = matter.utils.logger;\n\tlet _____request = matter.utils.request;\n\n\t//Actions for templates list\n\tclass TemplatesAction {\n\t\tget templatesEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'templates'];\n\t\t\t//Check for app groups action\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\t// endpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t\t_____logger.log({description: 'Templates action is not currently supported for a specific application.', func: 'accountsEndpoint', obj: 'AccountsAction'});\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t_____logger.log({description: 'Templates endpoint built.', endpoint: endpointStr, func: 'templatesEndpoint', obj: 'TemplatesAction'});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get templates or single application\n\t\tget() {\n\t\t\t_____logger.log({description: 'Get template called.', func: 'get', obj: 'TemplatesAction'});\n\t\t\treturn _____request.get(this.templatesEndpoint).then((response) => {\n\t\t\t\t_____logger.log({description: 'Templates loaded.', response: response, func: 'get', obj: 'TemplatesAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_____logger.error({description: 'Error getting templates.', error: errRes, func: 'get', obj: 'TemplatesAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Add an application\n\t\tadd(appData) {\n\t\t\t_____logger.log({description: 'Add template called.', func: 'add', obj: 'TemplatesAction'});\n\t\t\treturn _____request.post(this.templatesEndpoint, appData).then((response) => {\n\t\t\t\t_____logger.log({description: 'Templates added successfully.', func: 'add', obj: 'TemplatesAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_____logger.error({description: 'Error adding template.', error: errRes, func: 'add', obj: 'TemplatesAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Search with partial of username\n\t\tsearch(query) {\n\t\t\t_____logger.log({description: 'Search template called.', query: query, func: 'search', obj: 'TemplatesAction'});\n\t\t\tvar searchEndpoint = this.templatesEndpoint + '/search/';\n\t\t\tif (query && _.isString(query)) {\n\t\t\t\tsearchEndpoint += query;\n\t\t\t}\n\t\t\t_____logger.log({description: 'Search endpoint created.', endpoint: searchEndpoint, func: 'search', obj: 'TemplatesAction'});\n\t\t\treturn _____request.get(searchEndpoint).then((response) => {\n\t\t\t\t_____logger.log({description: 'Template(s) found successfully.', response: response, endpoint: searchEndpoint, func: 'search', obj: 'TemplatesAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_____logger.log({description: 'Error searching for templates.', query: query, error: errRes, endpoint: searchEndpoint, func: 'search', obj: 'TemplatesAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\tlet ____request = matter.utils.request;\n\tlet ____logger = matter.utils.logger;\n\n\t//Actions for directories list\n\tclass _DirectoriesAction {\n\t\tconstructor(actionData) {\n\t\t\t//Check to see if action is for a specific app\n\t\t\tif (actionData && _.isObject(actionData) && _.has(actionData, 'app')) {\n\t\t\t\tthis.app = actionData.app;\n\t\t\t\t____logger.log({description: 'Provided app data set to app parameter.', action: this, providedData: actionData, func: 'constructor', obj: 'DirectoriesAction'});\n\t\t\t} else if (actionData && _.isString(actionData)) {\n\t\t\t\tthis.app = {name: actionData};\n\t\t\t\t____logger.log({description: 'App name provided as string was set.', action: this, providedData: actionData, func: 'constructor', obj: 'DirectoriesAction'});\n\t\t\t}\n\t\t\t____logger.info({description: 'New directories action.', action: this, providedData: actionData, func: 'constructor', obj: 'DirectoriesAction'});\n\t\t}\n\t\tget directoriesEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'directories'];\n\t\t\t//Check for app groups action\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\tendpointArray = endpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t____logger.log({description: 'Directories endpoint built.', endpoint: endpointStr, func: 'directoriesEndpoint', obj: 'DirectoriesAction'});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get users or single application\n\t\tget() {\n\t\t\t____logger.debug({description: 'Directories get called.', action: this, func: 'get', obj: 'DirectoriesAction'});\n\t\t\treturn ____request.get(this.directoriesEndpoint).then((response) => {\n\t\t\t\t____logger.info({descrption: 'Directories loaded successfully.', response: response, func: 'get', obj: 'DirectoriesAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t____logger.error({descrption: 'error getting users', error: errRes, func: 'get', obj: 'DirectoriesAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Add an application\n\t\tadd(appData) {\n\t\t\t____logger.debug({description: 'Add directory called.', action: this, appData: appData, func: 'get', obj: 'DirectoriesAction'});\n\t\t\treturn ____request.post(this.directoriesEndpoint, appData).then((response) => {\n\t\t\t\t____logger.log({description: 'Application added successfully.', response: response, func: 'add', obj: 'DirectoriesAction'});\n\t\t\t\t//TODO: Return list of group objects\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t____logger.error({description: 'Error adding group.', error: errRes, func: 'add', obj: 'DirectoriesAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Search with partial of directory name\n\t\tsearch(query) {\n\t\t\tvar searchEndpoint = this.directoriesEndpoint + '/search/';\n\t\t\tif (query && _.isString(query)) {\n\t\t\t\tsearchEndpoint += query;\n\t\t\t}\n\t\t\tif (!query || query == '') {\n\t\t\t\t____logger.debug({description: 'Null query, returning empty array.', func: 'search', obj: 'DirectoriesAction'});\n\t\t\t\treturn Promise.resolve([]);\n\t\t\t}\n\t\t\treturn ____request.get(searchEndpoint).then((response) => {\n\t\t\t\t____logger.log({description: 'Found directories based on search.', response: response, func: 'search', obj: 'DirectoriesAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t____logger.error({description: 'Error searching directories.', error: errRes, func: 'search', obj: 'DirectoriesAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\tlet ___logger = matter.utils.logger;\n\n\tclass File {\n\t\tconstructor(fileData) {\n\t\t\tif (fileData && _.isObject(fileData) && _.has(fileData, ['path', 'app'])) {\n\t\t\t\tthis.path = fileData.path;\n\t\t\t\tthis.app = fileData.app;\n\t\t\t\tthis.pathArray = this.path.split('/');\n\t\t\t\t//Get name from data or from pathArray\n\t\t\t\tthis.name = _.has(fileData, 'name') ? fileData.name : this.pathArray[this.pathArray.length - 1];\n\t\t\t} else if (fileData && !_.isObject(fileData)) {\n\t\t\t\t___logger.error({description: 'File data is not an object. File data must be an object that includes path and appName.', func: 'constructor', obj: 'File'});\n\t\t\t\t//TODO: Get appName from path data?\n\t\t\t\tthrow new Error('File data must be an object that includes path and appName.');\n\t\t\t} else {\n\t\t\t\t___logger.error({description: 'File data include path and app is needed to create a File action.', func: 'constructor', obj: 'File'});\n\t\t\t\tthrow new Error('File data with path and app is needed to create file action.');\n\t\t\t}\n\t\t\tthis.type = 'file';\n\t\t\t___logger.debug({description: 'File object constructed.', file: this, func: 'constructor', obj: 'File'});\n\t\t}\n\t\tget ext() {\n\t\t\tlet re = /(?:\\.([^.]+))?$/;\n\t\t\tthis.ext = re.exec(this.name)[1];\n\t\t}\n\t\tget() {\n\t\t\tif (!this.app || !this.app.frontend) {\n\t\t\t\t___logger.error({description: 'Application Frontend data not available. Make sure to call .get().', func: 'get', obj: 'File'});\n\t\t\t\treturn Promise.reject({message: 'Front end data is required to get file.'});\n\t\t\t} else {\n\t\t\t\tlet saveParams = {\n\t\t\t\t\tBucket: this.app.frontend.bucketName,\n\t\t\t\t\tKey: this.path\n\t\t\t\t};\n\t\t\t\t//Set contentType from fileData to ContentType parameter of new object\n\t\t\t\tif (fileData.contentType) {\n\t\t\t\t\tsaveParams.ContentType = fileData.contentType;\n\t\t\t\t}\n\t\t\t\t___logger.debug({description: 'File get params built.', saveParams: saveParams, fileData: fileData, func: 'get', obj: 'File'});\n\t\t\t\treturn s3.getObject(saveParams, function(err, data) {\n\t\t\t\t\t//[TODO] Add putting object ACL (make public)\n\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t___logger.error({description: 'File loaded successfully.', fileData: data, func: 'get', obj: 'File'});\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t}\telse {\n\t\t\t\t\t\t___logger.error({description: 'Error loading file from S3.', error: err, func: 'get', obj: 'File'});\n\t\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t//Alias for get\n\t\topen() {\n\t\t\treturn this.get;\n\t\t}\n\t\tpublish(fileData) {\n\t\t\t//TODO: Publish file to application\n\t\t\t___logger.debug({description: 'File publish called.', file: this, fileData: fileData, func: 'publish', obj: 'File'});\n\t\t\tif (!this.app.frontend) {\n\t\t\t\t___logger.error({description: 'Application Frontend data not available. Make sure to call .get().', func: 'publish', obj: 'File'});\n\t\t\t\treturn Promise.reject({message: 'Front end data is required to publish file.'});\n\t\t\t} else {\n\t\t\t\tif (!_.has(fileData, ['content', 'path'])) {\n\t\t\t\t\t___logger.error({description: 'File data including path and content required to publish.', func: 'publish', obj: 'File'});\n\t\t\t\t\treturn Promise.reject({message: 'File data including path and content required to publish.'});\n\t\t\t\t}\n\t\t\t\tlet saveParams = {\n\t\t\t\t\tBucket: this.app.frontend.bucketName,\n\t\t\t\t\tKey: fileData.path,\n\t\t\t\t\tBody: fileData.content,\n\t\t\t\t\tACL: 'public-read'\n\t\t\t\t};\n\t\t\t\t//Set contentType from fileData to ContentType parameter of new object\n\t\t\t\tif (fileData.contentType) {\n\t\t\t\t\tsaveParams.ContentType = fileData.contentType;\n\t\t\t\t}\n\t\t\t\t//If AWS Credential do not exist, set them\n\t\t\t\tif (typeof AWS.config.credentials == 'undefined' || !AWS.config.credentials) {\n\t\t\t\t\t___logger.debug({description: 'AWS creds do not exist, so they are being set.', func: 'publish', obj: 'File'});\n\t\t\t\t\t_setAWSConfig();\n\t\t\t\t}\n\t\t\t\t___logger.debug({description: 'File publish params built.', saveParams: saveParams, fileData: fileData, func: 'publish', obj: 'File'});\n\t\t\t\treturn s3.putObject(saveParams, function(err, data) {\n\t\t\t\t\t//[TODO] Add putting object ACL (make public)\n\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t___logger.error({description: 'File saved successfully.', fileData: data, func: 'publish', obj: 'File'});\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t}\telse {\n\t\t\t\t\t\t___logger.error({description: 'Error saving file to S3.', error: err, func: 'publish', obj: 'File'});\n\t\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tgetTypes() {\n\t\t\t//Get content type and file type from extension\n\t\t}\n\t\topenWithFirepad(divId) {\n\t\t\t//TODO:Create new Firepad instance within div\n\t\t}\n\t\tgetDefaultContent() {\n\n\t\t}\n\t}\n\t//------------------ Utility Functions ------------------//\n\n\t// AWS Config\n\tfunction _setAWSConfig() {\n\t\tAWS.config.update({\n\t\t  credentials: new AWS.CognitoIdentityCredentials({\n\t\t  IdentityPoolId: config.aws.cognito.poolId\n\t\t  }),\n\t\t  region: config.aws.region\n\t\t});\n\t}\n\n\tlet __logger = matter.utils.logger;\n\n\tclass Files {\n\t\tconstructor(filesData) {\n\t\t\tif (filesData && _.isObject(filesData) && (_.has(filesData, 'appName') || _.has(filesData, 'name'))) { //Data is object containing directory data\n\t\t\t\tthis.app = filesData.filesData;\n\t\t\t} else if (filesData && _.isString(filesData)) { //Data is string name\n\t\t\t\tthis.app = {name: filesData};\n\t\t\t} else if (filesData && _.isArray(filesData)) {\n\t\t\t\t//TODO: Handle an array of files being passed as data\n\t\t\t\t__logger.error({description: 'Action data object with name is required to start a Files Action.', func: 'constructor', obj: 'Files'});\n\t\t\t\tthrow new Error('Files Data object with name is required to start a Files action.');\n\t\t\t} else {\n\t\t\t\t__logger.error({description: 'Action data object with name is required to start a Files Action.', func: 'constructor', obj: 'Files'});\n\t\t\t\tthrow new Error('Files Data object with name is required to start a Files action.');\n\t\t\t}\n\t\t\t__logger.debug({description: 'Files object constructed.', func: 'constructor', obj: 'Files'});\n\t\t}\n\t\tpublish() {\n\t\t\t//TODO: Publish all files\n\t\t}\n\t\tget() {\n\t\t\tif (!this.app || !this.app.frontend || !this.app.frontend.bucketName) {\n\t\t\t\t__logger.error({description: 'Application Frontend data not available. Make sure to call .get().', func: 'get', obj: 'Files'});\n\t\t\t\treturn Promise.reject({message: 'Bucket name required to get objects'});\n\t\t\t} else {\n\t\t\t\t//If AWS Credential do not exist, set them\n\t\t\t\tif (typeof AWS.config.credentials == 'undefined' || !AWS.config.credentials) {\n\t\t\t\t\t// logger.info('AWS creds are being updated to make request');\n\t\t\t\t\tsetAWSConfig();\n\t\t\t\t}\n\t\t\t\tlet s3 = new AWS.S3();\n\t\t\t\tlet listParams = {Bucket: this.app.frontend.bucketName};\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\ts3.listObjects(listParams, function(err, data) {\n\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\t__logger.info({description: 'Files list loaded.', filesData: data, func: 'get', obj: 'Files'});\n\t\t\t\t\t\t\treturn resolve(data.Contents);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t__logger.error({description: 'Error getting files from S3.', error: err, func: 'get', obj: 'Files'});\n\t\t\t\t\t\t\treturn reject(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tadd() {\n\t\t\t//TODO: Add a file to files list\n\t\t}\n\t\tdel() {\n\t\t\t//TODO: Delete a file from files list\n\t\t}\n\t\tget structure() {\n\t\t\t__logger.debug({description: 'Structure called.', func: 'getStructure', obj: 'Application'});\n\t\t\treturn this.get().then((filesArray) => {\n\t\t\t\tconst childStruct = childrenStructureFromArray(filesArray);\n\t\t\t\t__logger.log({description: 'Child struct from array.', childStructure: childStruct, func: 'getStructure', obj: 'Application'});\n\t\t\t\treturn childStruct;\n\t\t\t}, (err) => {\n\t\t\t\t__logger.error({description: 'Error getting application files.', error: err, func: 'getStructure', obj: 'Application'});\n\t\t\t\treturn Promise.reject({message: 'Error getting files.', error: err});\n\t\t\t});\n\t\t}\n\n\t}\n\t//------------------ Utility Functions ------------------//\n\n\t// AWS Config\n\tfunction setAWSConfig() {\n\t\tAWS.config.update({\n\t\t  credentials: new AWS.CognitoIdentityCredentials({\n\t\t  IdentityPoolId: config.aws.cognito.poolId\n\t\t  }),\n\t\t  region: config.aws.region\n\t\t});\n\t}\n\t//Convert from array file structure (from S3) to 'children' structure used in Editor GUI (angular-tree-control)\n\t//Examples for two files (index.html and /testFolder/file.js):\n\t//Array structure: [{path:'index.html'}, {path:'testFolder/file.js'}]\n\t//Children Structure [{type:'folder', name:'testfolder', children:[{path:'testFolder/file.js', name:'file.js', filetype:'javascript', contentType:'application/javascript'}]}]\n\tfunction childrenStructureFromArray(fileArray) {\n\t\t// logger.log('childStructureFromArray called:', fileArray);\n\t\t//Create a object for each file that stores the file in the correct 'children' level\n\t\tvar mappedStructure = fileArray.map(function(file) {\n\t\t\treturn buildStructureObject(file);\n\t\t});\n\t\treturn combineLikeObjs(mappedStructure);\n\t}\n\t//Convert file with key into a folder/file children object\n\tfunction buildStructureObject(file) {\n\t\tvar pathArray;\n\t\t// console.log('buildStructureObject with:', file);\n\t\tif (_.has(file, 'path')) {\n\t\t\t//Coming from files already having path (structure)\n\t\t\tpathArray = file.path.split('/');\n\t\t} else {\n\t\t\t//Coming from aws\n\t\t\tpathArray = file.Key.split('/');\n\t\t\t// console.log('file before pick:', file);\n\t\t\tfile = _.pick(file, 'Key');\n\t\t\tfile.path = file.Key;\n\t\t\tfile.name = file.Key;\n\t\t}\n\t\tvar currentObj = file;\n\t\tif (pathArray.length == 1) {\n\t\t\tcurrentObj.name = pathArray[0];\n\t\t\tif (!_.has(currentObj,'type')) {\n\t\t\t\tcurrentObj.type = 'file';\n\t\t\t}\n\t\t\tcurrentObj.path = pathArray[0];\n\t\t\treturn currentObj;\n\t\t} else {\n\t\t\tvar finalObj = {};\n\t\t\t_.each(pathArray, (loc, ind, list) => {\n\t\t\t\tif (ind != list.length - 1) {//Not the last loc\n\t\t\t\t\tcurrentObj.name = loc;\n\t\t\t\t\tcurrentObj.path = _.first(list, ind + 1).join('/');\n\t\t\t\t\tcurrentObj.type = 'folder';\n\t\t\t\t\tcurrentObj.children = [{}];\n\t\t\t\t\t//TODO: Find out why this works\n\t\t\t\t\tif (ind == 0) {\n\t\t\t\t\t\tfinalObj = currentObj;\n\t\t\t\t\t}\n\t\t\t\t\tcurrentObj = currentObj.children[0];\n\t\t\t\t} else {\n\t\t\t\t\tcurrentObj.type = 'file';\n\t\t\t\t\tcurrentObj.name = loc;\n\t\t\t\t\tcurrentObj.path = pathArray.join('/');\n\t\t\t\t\tif (file.$id) {\n\t\t\t\t\t\tcurrentObj.$id = file.$id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn finalObj;\n\t\t}\n\t}\n\t//Recursivley combine children of object's that have the same names\n\tfunction combineLikeObjs(mappedArray) {\n\t\tvar takenNames = [];\n\t\tvar finishedArray = [];\n\t\t_.each(mappedArray, (obj, ind, list) => {\n\t\t\tif (takenNames.indexOf(obj.name) == -1) {\n\t\t\t\ttakenNames.push(obj.name);\n\t\t\t\tfinishedArray.push(obj);\n\t\t\t} else {\n\t\t\t\tvar likeObj = _.findWhere(mappedArray, {name: obj.name});\n\t\t\t\t//Combine children of like objects\n\t\t\t\tlikeObj.children = _.union(obj.children, likeObj.children);\n\t\t\t\tlikeObj.children = combineLikeObjs(likeObj.children);\n\t\t\t\t// logger.log('extended obj:',likeObj);\n\t\t\t}\n\t\t});\n\t\treturn finishedArray;\n\t}\n\n\t//Convenience vars\n\tlet _request = matter.utils.request;\n\tlet _logger = matter.utils.logger;\n\n\t/**\n\t * Application class.\n\t *\n\t */\n\tclass _Application {\n\t\tconstructor(appData) {\n\t\t\t//Setup application data based on input\n\t\t\tif (appData && _.isObject(appData)) {\n\t\t\t\tthis.name = appData.name;\n\t\t\t\tthis.owner = appData.owner || null;\n\t\t\t\tthis.collaborators = appData.collaborators || [];\n\t\t\t\tthis.createdAt = appData.createdAt;\n\t\t\t\tthis.updatedAt = appData.updatedAt;\n\t\t\t\tthis.frontend = appData.frontend || {};\n\t\t\t\tthis.backend = appData.backend || {};\n\t\t\t\tthis.groups = appData.groups || null;\n\t\t\t\tthis.directories = appData.directories || null;\n\t\t\t} else if (appData && _.isString(appData)) {\n\t\t\t\tthis.name = appData;\n\t\t\t}\n\t\t\tif (Firebase) {\n\t\t\t\tthis.fbRef = new Firebase(config.fbUrl + appData.name);\n\t\t\t}\n\t\t\t// logger.debug({description: 'Application object created.', application: this, func: 'constructor', obj: 'Application'});\n\t\t}\n\t\tget appEndpoint() {\n\t\t\treturn `${matter.endpoint}/apps/${this.name}`;\n\t\t}\n\t\t//Get applications or single application\n\t\tget() {\n\t\t\t_logger.debug({description: 'Application get called.', func: 'get', obj: 'Application'});\n\t\t\treturn _request.get(this.appEndpoint).then((response) => {\n\t\t\t\t_logger.info({description: 'Application loaded successfully.', response: response, application: new _Application(response), func: 'get', obj: 'Application'});\n\t\t\t\treturn new _Application(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_logger.error({description: 'Error getting Application.', error: errRes, func: 'get', obj: 'Application'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Update an application\n\t\tupdate(appData) {\n\t\t\t_logger.debug({description: 'Application update called.', func: 'update', obj: 'Application'});\n\t\t\treturn _request.put(this.appEndpoint, appData).then((response) => {\n\t\t\t\t_logger.info({description: 'Application updated successfully.', response: response, func: 'update', obj: 'Application'});\n\t\t\t\treturn new _Application(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_logger.error({description: 'Error updating application.', error: errRes, func: 'update', obj: 'Application'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\n\t\taddStorage() {\n\t\t\t_logger.debug({description: 'Application add storage called.', application: this, func: 'addStorage', obj: 'Application'});\n\t\t\treturn _request.post(`${this.appEndpoint}/storage`, appData).then((response) => {\n\t\t\t\t_logger.info({description: 'Storage successfully added to application.', response: response, application: new _Application(response), func: 'addStorage', obj: 'Application'});\n\t\t\t\treturn new _Application(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_logger.error({description: 'Error adding storage to application.', error: errRes, func: 'addStorage', obj: 'Application'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\tapplyTemplate() {\n\t\t\t_logger.error({description: 'Applying templates to existing applications is not currently supported.', func: 'applyTemplate', obj: 'Application'});\n\t\t\treturn _request.post(endpoint, appData).then((response) => {\n\t\t\t\t_logger.info({description: 'Template successfully applied to application.', response: response, application: this, func: 'applyTemplate', obj: 'Application'});\n\t\t\t\treturn new _Application(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_logger.error({description: 'Error applying template to application.', error: errRes, application: this, func: 'applyTemplate', obj: 'Application'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Files object that contains files methods\n\t\tget files() {\n\t\t\t_logger.debug({description: 'Applications files action called.', application: this, func: 'files', obj: 'Application'});\n\t\t\treturn new Files({app: this});\n\t\t}\n\t\tfile(fileData) {\n\t\t\t_logger.debug({description: 'Applications file action called.', fileData: fileData, application: this, func: 'file', obj: 'Application'});\n\t\t\treturn new File({app: this, fileData: fileData});\n\t\t}\n\t\tget users() {\n\t\t\t_logger.debug({description: 'Applications users action called.', application: this, func: 'user', obj: 'Application'});\n\t\t\treturn new AccountsAction({app: this});\n\t\t}\n\t\tuser(userData) {\n\t\t\t_logger.debug({description: 'Applications user action called.', userData: userData, application: this, func: 'user', obj: 'Application'});\n\t\t\treturn new Account({app: this, userData: userData});\n\t\t}\n\t\tget groups() {\n\t\t\t_logger.debug({description: 'Applications groups action called.', application: this, func: 'groups', obj: 'Application'});\n\t\t\treturn new GroupsAction({app: this});\n\t\t}\n\t\tgroup(groupData) {\n\t\t\t_logger.debug({description: 'Applications group action called.', groupData: groupData, application: this, func: 'group', obj: 'Application'});\n\t\t\treturn new Group({app: this, groupData: groupData});\n\t\t}\n\t\tget directories() {\n\t\t\t_logger.debug({description: 'Applications directories action called.', application: this, func: 'directories', obj: 'Application'});\n\t\t\treturn new _DirectoriesAction({app: this});\n\t\t}\n\t\tdirectory(directoryData) {\n\t\t\t_logger.debug({description: 'Applications directory action called.', directoryData: directoryData, application: this, func: 'directory', obj: 'Application'});\n\t\t\treturn new Directory({app: this, directoryData: directoryData});\n\t\t}\n\t}\n\n\tlet request = matter.utils.request;\n\tlet logger = matter.utils.logger;\n\n\t//Actions for applications list\n\tclass AppsAction {\n\t\tconstructor() {\n\t\t\t//Call matter with name and settings\n\t\t}\n\t\tget appsEndpoint() {\n\t\t\treturn `${matter.endpoint}/apps`;\n\t\t}\n\t\t//Get applications or single application\n\t\tget() {\n\t\t\tlogger.debug({description: 'Apps get called.', action: this, func: 'get', obj: 'AppsAction'});\n\t\t\treturn request.get(this.appsEndpoint).then((response) => {\n\t\t\t\tlogger.info({description: 'Apps data loaded successfully.', response: response, func: 'get', obj: 'AppsAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\tlogger.error({description: 'Error getting apps data.', error: errRes, func: 'get', obj: 'AppsAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Add an application\n\t\tadd(appData) {\n\t\t\tlogger.debug({description: 'Application add called.', appData: appData, func: 'add', obj: 'AppsAction'});\n\t\t\treturn matter.utils.request.post(this.appsEndpoint, appData).then((response) => {\n\t\t\t\tlogger.info({description: 'Application added successfully.', response: response, func: 'add', obj: 'AppsAction'});\n\t\t\t\treturn new Application(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\tlogger.error({description: 'Error adding app.', error: errRes, func: 'add', obj: 'AppsAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**Grout Client Class\n\t * @ description Extending matter provides token storage and login/logout/signup capabilities\n\t */\n\tclass Grout extends Matter {\n\t\t//TODO: Use getter/setter to make this not a function\n\t\tconstructor() {\n\t\t\t//Call matter with tessellate\n\t\t\tsuper(config.appName, config.matterOptions);\n\t\t}\n\t\t//Start a new Apps Action\n\t\tget apps() {\n\t\t\tthis.utils.logger.debug({description: 'Apps Action called.', action: new AppsAction(), func: 'apps', obj: 'Grout'});\n\t\t\treturn new AppsAction();\n\t\t}\n\t\t//Start a new App action\n\t\tapp(appName) {\n\t\t\tthis.utils.logger.debug({description: 'Templates Action called.', appName: appName, template: new _Application(appName), func: 'app', obj: 'Grout'});\n\t\t\treturn new _Application(appName);\n\t\t}\n\t\t//Start a new Apps Action\n\t\tget templates() {\n\t\t\tthis.utils.logger.debug({description: 'Templates Action called.', action: new TemplatesAction(), func: 'templates', obj: 'Grout'});\n\t\t\treturn new TemplatesAction();\n\t\t}\n\t\t//Start a new App action\n\t\ttemplate(templateData) {\n\t\t\tthis.utils.logger.debug({description: 'Template Action called.', templateData: templateData, template: new Template(templateData), func: 'template', obj: 'Grout'});\n\t\t\treturn new Template(templateData);\n\t\t}\n\t\t//Start a new Accounts action\n\t\tget accounts() {\n\t\t\tthis.utils.logger.debug({description: 'Account Action called.', action: new AccountsAction(), func: 'users', obj: 'Grout'});\n\t\t\treturn new AccountsAction();\n\t\t}\n\t\t//Start a new Account action\n\t\taccount(userData) {\n\t\t\tthis.utils.logger.debug({description: 'Account Action called.', userData: userData, user: new Account(userData), func: 'user', obj: 'Grout'});\n\t\t\treturn new Account(userData);\n\t\t}\n\t\t//Start a new Accounts action\n\t\tget users() {\n\t\t\tthis.utils.logger.debug({description: 'Accounts Action called.', action: new AccountsAction(), func: 'users', obj: 'Grout'});\n\t\t\treturn new AccountsAction();\n\t\t}\n\t\t//Start a new Account action\n\t\tuser(userData) {\n\t\t\tthis.utils.logger.debug({description: 'Account Action called.', userData: userData, user: new Account(userData), func: 'user', obj: 'Grout'});\n\t\t\treturn new Account(userData);\n\t\t}\n\t\t//Start a new Groups action\n\t\tget groups() {\n\t\t\tthis.utils.logger.debug({description: 'Groups Action called.', action: new GroupsAction(), func: 'groups', obj: 'Grout'});\n\t\t\treturn new GroupsAction();\n\t\t}\n\t\t//Start a new Group action\n\t\tgroup(groupData) {\n\t\t\tthis.utils.logger.debug({description: 'Group Action called.', groupData: groupData, action: new Group({app: this, groupData: groupData}), func: 'group', obj: 'Grout'});\n\t\t\treturn new Group(groupData);\n\t\t}\n\t\t//Start a new Directories action\n\t\tget directories() {\n\t\t\tthis.utils.logger.debug({description: 'Directories Action called.', action: new DirectoriesAction(), func: 'directories', obj: 'Grout'});\n\t\t\treturn new DirectoriesAction();\n\t\t}\n\t\t//Start a new Group action\n\t\tdirectory(directoryData) {\n\t\t\tthis.utils.logger.debug({description: 'Directory Action called.', directoryData: directoryData, action: new Directory(directoryData), func: 'directory', obj: 'Grout'});\n\t\t\treturn new Directory(directoryData);\n\t\t}\n\n\t};\n\n\treturn Grout;\n\n}));"],"sourceRoot":"/source/"}