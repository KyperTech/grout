{"version":3,"sources":["grout.js"],"names":[],"mappings":"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","file":"grout.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kyper-matter'), require('lodash'), require('aws-sdk'), require('firebase')) :\n\ttypeof define === 'function' && define.amd ? define(['kyper-matter', 'lodash', 'aws-sdk', 'firebase'], factory) :\n\tglobal.Grout = factory(global.Matter,global._,global.AWS,global.Firebase);\n}(this, function (Matter,_,AWS,Firebase) { 'use strict';\n\n\tMatter = 'default' in Matter ? Matter['default'] : Matter;\n\t_ = 'default' in _ ? _['default'] : _;\n\tAWS = 'default' in AWS ? AWS['default'] : AWS;\n\tFirebase = 'default' in Firebase ? Firebase['default'] : Firebase;\n\n\tlet config = {\n\t\tserverUrl: 'http://tessellate.elasticbeanstalk.com',\n\t\ttokenName: 'grout',\n\t\tfbUrl: 'https://kyper-tech.firebaseio.com/tessellate',\n\t\tappName: 'tessellate',\n\t\tmatterOptions: {\n\t\t\tlocalServer: false,\n\t\t\tlogLevel: 'trace'\n\t\t},\n\t\taws: {\n\t\t\tregion: 'us-east-1',\n\t\t\tcognito: {\n\t\t\t\tpoolId: 'us-east-1:72a20ffd-c638-48b0-b234-3312b3e64b2e',\n\t\t\t\tparams: {\n\t\t\t\t\tAuthRoleArn: 'arn:aws:iam::823322155619:role/Cognito_TessellateUnauth_Role',\n\t\t\t\t\tUnauthRoleArn: 'arn:aws:iam::823322155619:role/Cognito_TessellateAuth_Role'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tlet matter = new Matter(config.appName, config.matterOptions);\n\n\tlet ________request = matter.utils.request;\n\tlet ___________logger = matter.utils.logger;\n\n\t//Actions for specific directory\n\tclass Directory {\n\t\tconstructor(actionData) {\n\t\t\tif (actionData && _.isObject(actionData) && (_.has(actionData, 'directoryName') || _.has(actionData, 'name'))) { //Data is object containing directory data\n\t\t\t\tthis.name = actionData.directoryName || actionData.name;\n\t\t\t\tif (_.has(actionData, 'appName')) {\n\t\t\t\t\tthis.appName = actionData.appName;\n\t\t\t\t}\n\t\t\t} else if (actionData && _.isString(actionData)) { //Data is string name\n\t\t\t\tthis.name = actionData;\n\t\t\t} else {\n\t\t\t\t___________logger.error({\n\t\t\t\t\tdescription: 'Action data object with name is required to start a Directory Action.',\n\t\t\t\t\tfunc: 'constructor', obj: 'Directory'\n\t\t\t\t});\n\t\t\t\tthrow new Error('Directory Data object with name is required to start a Directory action.');\n\t\t\t}\n\t\t}\n\t\tget directoryEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'directories', this.name];\n\t\t\t//Check for app account action\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\tendpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t___________logger.log({\n\t\t\t\tdescription: 'Directory endpoint built.',\n\t\t\t\tendpoint: endpointStr, func: 'directoryEndpoint',\n\t\t\t\tobj: 'Directory'\n\t\t\t});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get userlications or single userlication\n\t\tget() {\n\t\t\treturn ________request.get(this.directoryEndpoint).then((response) => {\n\t\t\t\t___________logger.info({\n\t\t\t\t\tdescription: 'Directory data loaded successfully.',\n\t\t\t\t\tresponse: response, func: 'get', obj: 'Directory'\n\t\t\t\t});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t___________logger.info({\n\t\t\t\t\tdescription: 'Error getting directory.',\n\t\t\t\t\terror: errRes, func: 'get', obj: 'Directory'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Update an Directory\n\t\tupdate(directoryData) {\n\t\t\t___________logger.debug({\n\t\t\t\tdescription: 'Directory updated called.',\n\t\t\t\tdirectoryData: directoryData, func: 'update', obj: 'Directory'\n\t\t\t});\n\t\t\treturn matter.utils.request.put(this.directoryEndpoint, directoryData).then((response) => {\n\t\t\t\t___________logger.info({\n\t\t\t\t\tdescription: 'Directory updated successfully.',\n\t\t\t\t\tdirectoryData: directoryData, response: response,\n\t\t\t\t\tfunc: 'update', obj: 'Directory'\n\t\t\t\t});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t___________logger.error({\n\t\t\t\t\tdescription: 'Error updating directory.',\n\t\t\t\t\tdirectoryData: directoryData, error: errRes,\n\t\t\t\t\tfunc: 'update', obj: 'Directory'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Delete an Directory\n\t\tdel(directoryData) {\n\t\t\t___________logger.debug({\n\t\t\t\tdescription: 'Delete directory called.',\n\t\t\t\tdirectoryData: directoryData, func: 'del', obj: 'Directory'\n\t\t\t});\n\t\t\treturn ________request.delete(this.directoryEndpoint, directoryData).then((response) => {\n\t\t\t\t___________logger.info({\n\t\t\t\t\tdescription: 'Directory deleted successfully.',\n\t\t\t\t\tdirectoryData: directoryData, func: 'del', obj: 'Directory'\n\t\t\t\t});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t___________logger.error({\n\t\t\t\t\tdescription: 'Error deleting directory.',\n\t\t\t\t\terror: errRes, func: 'del', obj: 'Directory'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\tlet _______request = matter.utils.request;\n\tlet __________logger = matter.utils.logger;\n\n\t//Actions for directories list\n\tclass DirectoriesAction {\n\t\tconstructor(actionData) {\n\t\t\t//Check to see if action is for a specific app\n\t\t\tif (actionData && _.isObject(actionData) && _.has(actionData, 'app')) {\n\t\t\t\tthis.app = actionData.app;\n\t\t\t\t__________logger.log({description: 'Provided app data set to app parameter.', action: this, providedData: actionData, func: 'constructor', obj: 'DirectoriesAction'});\n\t\t\t} else if (actionData && _.isString(actionData)) {\n\t\t\t\tthis.app = {name: actionData};\n\t\t\t\t__________logger.log({description: 'App name provided as string was set.', action: this, providedData: actionData, func: 'constructor', obj: 'DirectoriesAction'});\n\t\t\t}\n\t\t\t__________logger.info({description: 'New directories action.', action: this, providedData: actionData, func: 'constructor', obj: 'DirectoriesAction'});\n\t\t}\n\t\tget directoriesEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'directories'];\n\t\t\t//Check for app groups action\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\tendpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t__________logger.log({description: 'Directories endpoint built.', endpoint: endpointStr, func: 'directoriesEndpoint', obj: 'DirectoriesAction'});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get users or single application\n\t\tget() {\n\t\t\t__________logger.debug({description: 'Directories get called.', action: this, func: 'get', obj: 'DirectoriesAction'});\n\t\t\treturn _______request.get(this.directoriesEndpoint).then((response) => {\n\t\t\t\t__________logger.info({descrption: 'Directories loaded successfully.', response: response, func: 'get', obj: 'DirectoriesAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t__________logger.error({descrption: 'error getting users', error: errRes, func: 'get', obj: 'DirectoriesAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Add an application\n\t\tadd(appData) {\n\t\t\t__________logger.debug({description: 'Add directory called.', action: this, appData: appData, func: 'get', obj: 'DirectoriesAction'});\n\t\t\treturn _______request.post(this.directoriesEndpoint, appData).then((response) => {\n\t\t\t\t__________logger.log({description: 'Application added successfully.', response: response, func: 'add', obj: 'DirectoriesAction'});\n\t\t\t\t//TODO: Return list of group objects\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t__________logger.error({description: 'Error adding group.', error: errRes, func: 'add', obj: 'DirectoriesAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Search with partial of directory name\n\t\tsearch(query) {\n\t\t\tvar searchEndpoint = this.directoriesEndpoint + '/search/';\n\t\t\tif (query && _.isString(query)) {\n\t\t\t\tsearchEndpoint += query;\n\t\t\t}\n\t\t\tif (!query || query == '') {\n\t\t\t\t__________logger.debug({description: 'Null query, returning empty array.', func: 'search', obj: 'DirectoriesAction'});\n\t\t\t\treturn Promise.resolve([]);\n\t\t\t}\n\t\t\treturn _______request.get(searchEndpoint).then((response) => {\n\t\t\t\t__________logger.log({description: 'Found directories based on search.', response: response, func: 'search', obj: 'DirectoriesAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t__________logger.error({description: 'Error searching directories.', error: errRes, func: 'search', obj: 'DirectoriesAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\tlet ______request = matter.utils.request;\n\tlet _________logger = matter.utils.logger;\n\n\t//Actions for specific user\n\tclass Group {\n\t\tconstructor(actionData) {\n\t\t\t//Call matter with name and settings\n\t\t\tif (actionData && _.isObject(actionData) && _.has(actionData, 'groupData')) { //Data is object containing group data\n\t\t\t\tthis.name = _.isObject(actionData.groupData) ? actionData.groupData.name : actionData.groupData;\n\t\t\t\tif (_.has(actionData, 'app')) {\n\t\t\t\t\tthis.app = actionData.app;\n\t\t\t\t}\n\t\t\t} else if (actionData && _.isString(actionData)) { //Data is string name\n\t\t\t\tthis.name = actionData;\n\t\t\t} else {\n\t\t\t\t_________logger.error({description: 'Action data is required to start a Group Action.', func: 'constructor', obj: 'Group'});\n\t\t\t\tthrow new Error('Username is required to start an Group');\n\t\t\t}\n\t\t}\n\t\tget groupEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'groups', this.name];\n\t\t\t//Check for app account action\n\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\tendpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t_________logger.log({description: 'Group Endpoint built.', endpoint: endpointStr, func: 'groupEndpoint', obj: 'Group'});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get userlications or single userlication\n\t\tget() {\n\t\t\treturn ______request.get(this.groupEndpoint).then((response) => {\n\t\t\t\t_________logger.info({description: 'Group data loaded successfully.', response: response, func: 'get', obj: 'Group'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_________logger.info({description: 'Error getting group.', error: errRes, func: 'get', obj: 'Group'});\n\t\t\t\treturn Promise.reject(errRes.response.text || errRes.response);\n\t\t\t});\n\t\t}\n\t\t//Update an Group\n\t\tupdate(groupData) {\n\t\t\t_________logger.log({description: 'Group updated called.', groupData: groupData, func: 'update', obj: 'Group'});\n\t\t\treturn matter.utils.request.put(this.groupEndpoint, groupData).then((response) => {\n\t\t\t\t_________logger.info({description: 'Group updated successfully.', groupData: groupData, response: response, func: 'update', obj: 'Group'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_________logger.error({description: 'Error updating group.', groupData: groupData, error: errRes, func: 'update', obj: 'Group'});\n\t\t\t\treturn Promise.reject(errRes.response.text || errRes.response);\n\t\t\t});\n\t\t}\n\t\t//Delete an Group\n\t\tdel(groupData) {\n\t\t\t_________logger.log({description: 'Delete group called.', groupData: groupData, func: 'del', obj: 'Group'});\n\t\t\treturn ______request.del(this.groupEndpoint, {}).then((response) => {\n\t\t\t\t_________logger.info({description: 'Group deleted successfully.', groupData: groupData, func: 'del', obj: 'Group'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_________logger.error({description: 'Error deleting group.', error: errRes, text: errRes.response.text, groupData: groupData,  func: 'del', obj: 'Group'});\n\t\t\t\treturn Promise.reject(errRes.response.text || errRes.response);\n\t\t\t});\n\t\t}\n\t\t//Update an Group\n\t\taddAccounts(accountsData) {\n\t\t\t_________logger.log({description: 'Group updated called.', accountsData: accountsData, func: 'update', obj: 'Group'});\n\t\t\tlet accountsArray = accountsData;\n\t\t\t//Handle provided data being a string list\n\t\t\tif (_.isString(accountsData)) {\n\t\t\t\taccountsArray = accountsData.split(',');\n\t\t\t}\n\t\t\t//Check item in array to see if it is a string (username) instead of _id\n\t\t\tif (_.isString(accountsArray[0])) {\n\t\t\t\t_________logger.error({description: 'Accounts array only currently supports account._id not account.username.', accountsData: accountsData, func: 'update', obj: 'Group'});\n\t\t\t\treturn Promise.reject({message: 'Accounts array only currently supports account._id not account.username.'});\n\t\t\t}\n\t\t\t_________logger.log({description: 'Updating group with accounts array.', accountsArray: accountsArray, func: 'update', obj: 'Group'});\n\t\t\treturn this.update({accounts: accountsArray}).then((response) => {\n\t\t\t\t_________logger.info({description: 'Account(s) added to group successfully.', response: response, func: 'addAccounts', obj: 'Group'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_________logger.error({description: 'Error addAccountseting group.', error: errRes,  func: 'addAccounts', obj: 'Group'});\n\t\t\t\treturn Promise.reject(errRes.response.text || errRes.response);\n\t\t\t});\n\t\t}\n\t}\n\n\tlet _____request = matter.utils.request;\n\tlet ________logger = matter.utils.logger;\n\n\t//Actions for users list\n\tclass GroupsAction {\n\t\tconstructor(actionData) {\n\t\t\t//Check to see if action is for a specific app\n\t\t\tif (actionData && _.isObject(actionData) && _.has(actionData, 'app')) {\n\t\t\t\tthis.app = actionData.app;\n\t\t\t\t________logger.log({\n\t\t\t\t\tdescription: 'Provided app data set to app parameter.',\n\t\t\t\t\taction: this, providedData: actionData,\n\t\t\t\t\tfunc: 'constructor', obj: 'GroupsAction'\n\t\t\t\t});\n\t\t\t} else if (actionData && _.isString(actionData)) {\n\t\t\t\tthis.app = {name: actionData};\n\t\t\t\t________logger.log({\n\t\t\t\t\tdescription: 'App name provided as string was set.',\n\t\t\t\t\taction: this, providedData: actionData,\n\t\t\t\t\tfunc: 'constructor', obj: 'GroupsAction'\n\t\t\t\t});\n\t\t\t}\n\t\t\t________logger.info({\n\t\t\t\tdescription: 'New Groups action.', action: this,\n\t\t\t\tprovidedData: actionData, func: 'constructor', obj: 'GroupsAction'\n\t\t\t});\n\t\t}\n\t\tget groupsEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'groups'];\n\t\t\t//Check for app groups action\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\tendpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t________logger.log({\n\t\t\t\tdescription: 'Groups Endpoint built.', endpoint: endpointStr,\n\t\t\t\tfunc: 'groupsEndpoint', obj: 'GroupsAction'\n\t\t\t});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get users or single application\n\t\tget() {\n\t\t\t________logger.log({\n\t\t\t\tdescription: 'Get group called.',\n\t\t\t\tfunc: 'get', obj: 'GroupsAction'\n\t\t\t});\n\t\t\treturn _____request.get(this.groupsEndpoint).then((response) => {\n\t\t\t\t________logger.info({\n\t\t\t\t\tdescription: 'Groups loaded successfully.',\n\t\t\t\t\tresponse: response, func: 'get', obj: 'GroupsAction'\n\t\t\t\t});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t________logger.info({\n\t\t\t\t\tdescription: 'Error getting groups.', error: errRes,\n\t\t\t\t\tfunc: 'get', obj: 'GroupsAction'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Add an application\n\t\tadd(groupData) {\n\t\t\tvar newGroupData = groupData;\n\t\t\t________logger.debug({\n\t\t\t\tdescription: 'Add group called.', groupData: groupData,\n\t\t\t\tfunc: 'add', obj: 'GroupsAction'\n\t\t\t});\n\t\t\tif (_.isString(groupData)) {\n\t\t\t\t//Group data is string\n\t\t\t\tnewGroupData = {name: groupData};\n\t\t\t}\n\t\t\t________logger.debug({\n\t\t\t\tdescription: 'Add group called.', newGroupData: newGroupData,\n\t\t\t\tfunc: 'add', obj: 'GroupsAction'\n\t\t\t});\n\t\t\treturn _____request.post(this.groupsEndpoint, newGroupData).then((response) => {\n\t\t\t\t________logger.log({\n\t\t\t\t\tdescription: 'Group added to application successfully.',\n\t\t\t\t\tresponse: response, func: 'add', obj: 'GroupsAction'\n\t\t\t\t});\n\t\t\t\t//TODO: Return list of group objects\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t________logger.error({\n\t\t\t\t\tdescription: 'Error adding group.',\n\t\t\t\t\terror: errRes, func: 'add', obj: 'GroupsAction'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Search with partial of username\n\t\tsearch(query) {\n\t\t\t________logger.debug({\n\t\t\t\tdescription: 'Search groups called.', query: query,\n\t\t\t\tfunc: 'search', obj: 'GroupsAction'\n\t\t\t});\n\t\t\tif (!query || query == '' || !_.isString(query)) {\n\t\t\t\t________logger.log({\n\t\t\t\t\tdescription: 'Null or invalid query, returning empty array.',\n\t\t\t\t\tfunc: 'search', obj: 'GroupsAction'\n\t\t\t\t});\n\t\t\t\treturn Promise.resolve([]);\n\t\t\t}\n\t\t\tlet searchEndpoint = `${this.groupsEndpoint}/search/${query}`;\n\t\t\t________logger.debug({\n\t\t\t\tdescription: 'Search endpoint created.',\n\t\t\t\tendpoint: searchEndpoint, func: 'search', obj: 'GroupsAction'\n\t\t\t});\n\t\t\treturn _____request.get(searchEndpoint).then((response) => {\n\t\t\t\t________logger.log({\n\t\t\t\t\tdescription: 'Found groups based on search.',\n\t\t\t\t\tresponse: response, func: 'search', obj: 'GroupsAction'\n\t\t\t\t});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t________logger.error({\n\t\t\t\t\tdescription: 'Error searching groups.',\n\t\t\t\t\terror: errRes, func: 'search', obj: 'GroupsAction'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\tlet ____request = matter.utils.request;\n\tlet _______logger = matter.utils.logger;\n\n\t//Actions for specific user\n\tclass Account {\n\t\tconstructor(accountData) {\n\t\t\t//Call matter with name and settings\n\t\t\tif (accountData && _.isObject(accountData) && _.has(accountData, 'username')) {\n\t\t\t\t_.extend(this, accountData);\n\t\t\t} else if (accountData && _.isString(accountData)) {\n\t\t\t\tthis.username = accountData;\n\t\t\t} else {\n\t\t\t\t_______logger.error({\n\t\t\t\t\tdescription: 'AccountData is required to start an AccountAction',\n\t\t\t\t\tfunc: 'constructor', obj: 'Account'\n\t\t\t\t});\n\t\t\t\tthrow new Error('username is required to start an AccountAction');\n\t\t\t}\n\t\t}\n\t\t//Build endpoint based on accountData\n\t\tget accountEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'accounts', this.username];\n\t\t\t//Check for app account action\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\tendpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t_______logger.log({description: 'Account Endpoint built.', endpoint: endpointStr, func: 'accountEndpoint', obj: 'Account'});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get a user\n\t\tget() {\n\t\t\t_______logger.debug({description: 'Account data loaded successfully.', func: 'get', obj: 'Account'});\n\t\t\treturn ____request.get(this.accountEndpoint).then((response) => {\n\t\t\t\t_______logger.info({description: 'Account data loaded successfully.', response: response, func: 'get', obj: 'Account'});\n\t\t\t\treturn new Account(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_______logger.error({description: 'Error getting user.', error: errRes, func: 'get', obj: 'Account'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Update a Account\n\t\tupdate(accountData) {\n\t\t\t_______logger.debug({description: 'Update user called.', accountData: accountData, func: 'update', obj: 'Account'});\n\t\t\treturn ____request.put(this.accountEndpoint, accountData).then((response) => {\n\t\t\t\t_______logger.info({description: 'Account updated successfully.', func: 'update', obj: 'Account'});\n\t\t\t\t//TODO: Extend this with current info before returning\n\t\t\t\treturn new Account(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_______logger.error({description: 'Error updating user.', func: 'update', obj: 'Account'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Delete a Account\n\t\tdel(accountData) {\n\t\t\t_______logger.debug({description: 'Delete user called.', func: 'del', obj: 'Account'});\n\t\t\treturn ____request.del(this.accountEndpoint, accountData).then((response) => {\n\t\t\t\t_______logger.info({description: 'Delete user successful.', response: response, func: 'del', obj: 'Account'});\n\t\t\t\treturn new Account(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_______logger.error({description: 'Error deleting user.', accountData: accountData, error: errRes, func: 'del', obj: 'Account'});\n\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\tlet ______logger = matter.utils.logger;\n\t//Actions for accounts list\n\tclass AccountsAction {\n\t\tconstructor(actionData) {\n\t\t\t//Check to see if action is for a specific app\n\t\t\tif (actionData && _.isObject(actionData) && _.has(actionData, 'app')) {\n\t\t\t\tthis.app = actionData.app;\n\t\t\t\t______logger.log({description: 'Provided app data set to app parameter.', action: this, providedData: actionData, func: 'constructor', obj: 'AccountsAction'});\n\t\t\t} else if (actionData && _.isString(actionData)) {\n\t\t\t\tthis.app = {name: actionData};\n\t\t\t\t______logger.log({description: 'App name provided as string was set.', action: this, providedData: actionData, func: 'constructor', obj: 'AccountsAction'});\n\t\t\t}\n\t\t\t______logger.info({description: 'New Accounts action.', action: this, providedData: actionData, func: 'constructor', obj: 'AccountsAction'});\n\t\t}\n\t\tget accountsEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'accounts'];\n\t\t\t//Check for app account action\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\t//Splice apps, appName into index 1\n\t\t\t\tendpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t______logger.log({description: 'Accounts Endpoint built.', endpoint: endpointStr, func: 'accountsEndpoint', obj: 'AccountsAction'});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get accounts or single application\n\t\tget() {\n\t\t\t______logger.log({description: 'Accounts get called.', func: 'get', obj: 'AccountsAction'});\n\t\t\treturn matter.utils.request.get(this.accountsEndpoint).then((response) => {\n\t\t\t\t______logger.info({description: 'Accounts loaded successfully.', func: 'get', obj: 'AccountsAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t______logger.info({description: 'Error getting accounts.', error: errRes, func: 'get', obj: 'AccountsAction'});\n\t\t\t\treturn Promise.reject(errRes.message || 'Error getting accounts.');\n\t\t\t});\n\t\t}\n\t\t//Add an application\n\t\tadd(accountData) {\n\t\t\t______logger.info({description: 'Account add called.', accountData: accountData, func: 'add', obj: 'AccountsAction'});\n\t\t\treturn this.utils.request.post(this.accountsEndpoint, accountData).then((response) => {\n\t\t\t\t______logger.info({description: 'Account added successfully.', response: response, newAccount: new Account(response), func: 'add', obj: 'AccountsAction'});\n\t\t\t\treturn new Account(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t______logger.error({description: 'Account add called.', error: errRes, accountData: accountData, func: 'add', obj: 'AccountsAction'});\n\t\t\t\treturn Promise.reject(errRes.message || 'Error adding account.');\n\t\t\t});\n\t\t}\n\t\t//Search with partial of accountname\n\t\tsearch(query) {\n\t\t\t______logger.log({description: 'Accounts search called.', query: query, func: 'search', obj: 'AccountsAction'});\n\t\t\tvar searchEndpoint = this.accountsEndpoint + '/search/';\n\t\t\tif (query && _.isString(query)) {\n\t\t\t\tsearchEndpoint += query;\n\t\t\t}\n\t\t\tif (!query || query == '') {\n\t\t\t\t______logger.log({description: 'Null query, returning empty array.', func: 'search', obj: 'AccountsAction'});\n\t\t\t\treturn Promise.resolve([]);\n\t\t\t}\n\t\t\treturn matter.utils.request.get(searchEndpoint).then((response) => {\n\t\t\t\t______logger.log({description: 'Accounts search responded.', response: response, query: query, func: 'search', obj: 'AccountsAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t______logger.error({description: 'Error searching Accounts.', error: errRes, query: query, func: 'search', obj: 'AccountsAction'});\n\t\t\t\treturn Promise.reject(errRes.message || 'Error searching accounts.');\n\t\t\t});\n\t\t}\n\t}\n\n\tlet ___request = matter.utils.request;\n\tlet _____logger = matter.utils.logger;\n\t//Actions for specific user\n\tclass Template {\n\t\tconstructor(templateData) {\n\t\t\t//Call matter with name and settings\n\t\t\tif (templateData && _.isString(templateData)) {\n\t\t\t\tthis.name = templateData;\n\t\t\t} else {\n\t\t\t\t_____logger.error({\n\t\t\t\t\tdescription: 'Template data is required to start a Template action.',\n\t\t\t\t\tfunc: 'constructor', obj: 'Template'\n\t\t\t\t});\n\t\t\t\tthrow new Error('Template data is required to start a Template action.');\n\t\t\t}\n\t\t}\n\t\tget templateEndpoint() {\n\t\t\treturn `${matter.endpoint}/templates/${this.name}`;\n\t\t}\n\t\t//Get userlications or single userlication\n\t\tget() {\n\t\t\t_____logger.log({description: 'Get template called.', name: this.name, func: 'get', obj: 'Template'});\n\t\t\treturn ___request.get(this.templateEndpoint).then((response) => {\n\t\t\t\t_____logger.log({description: 'Get template responded.', response: response, func: 'get', obj: 'Template'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_____logger.error({description: 'Error getting template.', error: errRes, func: 'get', obj: 'Template'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Update an userlication\n\t\tupdate(templateData) {\n\t\t\t_____logger.log({description: 'Update template called.', templateData: templateData, func: 'update', obj: 'Template'});\n\t\t\treturn ___request.put(this.templateEndpoint, templateData).then((response) => {\n\t\t\t\t_____logger.log({description: 'Update template responded.', response: response, templateData: templateData, func: 'update', obj: 'Template'});\n\t\t\t\t//TODO: Return template object\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_____logger.error({description: 'Error updating template.', error: errRes, func: 'update', obj: 'Template'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Delete a template\n\t\tdel(templateData) {\n\t\t\t_____logger.log({description: 'Delete template called.', templateData: templateData, func: 'del', obj: 'Template'});\n\t\t\treturn ___request.delete(this.endpoint, templateData).then((response) => {\n\t\t\t\t_____logger.log({description: 'Template deleted successfully.', response: response, func: 'del', obj: 'Template'});\n\t\t\t\t//TODO: Return template object\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_____logger.error({description: 'Error deleting template.', error: errRes, func: 'del', obj: 'Template'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\tlet ____logger = matter.utils.logger;\n\tlet __request = matter.utils.request;\n\n\t//Actions for templates list\n\tclass TemplatesAction {\n\t\tget templatesEndpoint() {\n\t\t\tlet endpointArray = [matter.endpoint, 'templates'];\n\t\t\t//Check for app groups action\n\t\t\tif (_.has(this, 'app') && _.has(this.app, 'name')) {\n\t\t\t\t// endpointArray.splice(1, 0, 'apps', this.app.name);\n\t\t\t\t____logger.log({description: 'Templates action is not currently supported for a specific application.', func: 'accountsEndpoint', obj: 'AccountsAction'});\n\t\t\t}\n\t\t\t//Create string from endpointArray\n\t\t\tlet endpointStr = endpointArray.join('/');\n\t\t\t____logger.log({description: 'Templates endpoint built.', endpoint: endpointStr, func: 'templatesEndpoint', obj: 'TemplatesAction'});\n\t\t\treturn endpointStr;\n\t\t}\n\t\t//Get templates or single application\n\t\tget() {\n\t\t\t____logger.log({description: 'Get template called.', func: 'get', obj: 'TemplatesAction'});\n\t\t\treturn __request.get(this.templatesEndpoint).then((response) => {\n\t\t\t\t____logger.log({description: 'Templates loaded.', response: response, func: 'get', obj: 'TemplatesAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t____logger.error({description: 'Error getting templates.', error: errRes, func: 'get', obj: 'TemplatesAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Add an application\n\t\tadd(appData) {\n\t\t\t____logger.log({description: 'Add template called.', func: 'add', obj: 'TemplatesAction'});\n\t\t\treturn __request.post(this.templatesEndpoint, appData).then((response) => {\n\t\t\t\t____logger.log({description: 'Templates added successfully.', func: 'add', obj: 'TemplatesAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t____logger.error({description: 'Error adding template.', error: errRes, func: 'add', obj: 'TemplatesAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Search with partial of username\n\t\tsearch(query) {\n\t\t\t____logger.log({description: 'Search template called.', query: query, func: 'search', obj: 'TemplatesAction'});\n\t\t\tvar searchEndpoint = this.templatesEndpoint + '/search/';\n\t\t\tif (query && _.isString(query)) {\n\t\t\t\tsearchEndpoint += query;\n\t\t\t}\n\t\t\t____logger.log({description: 'Search endpoint created.', endpoint: searchEndpoint, func: 'search', obj: 'TemplatesAction'});\n\t\t\treturn __request.get(searchEndpoint).then((response) => {\n\t\t\t\t____logger.log({description: 'Template(s) found successfully.', response: response, endpoint: searchEndpoint, func: 'search', obj: 'TemplatesAction'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t____logger.log({description: 'Error searching for templates.', query: query, error: errRes, endpoint: searchEndpoint, func: 'search', obj: 'TemplatesAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\t//Convenience vars\n\tlet ___logger = matter.utils.logger;\n\tlet firepad = getFirepadLib();\n\tclass File {\n\t\tconstructor(actionData) {\n\t\t\tif (actionData && _.isObject(actionData) && _.has(actionData, 'fileData') && _.has(actionData, 'app')) {\n\t\t\t\t_.extend(this, actionData.fileData);\n\t\t\t\tthis.app = actionData.app;\n\t\t\t\tif (!this.path) {\n\t\t\t\t\tif (!this.ref) {\n\t\t\t\t\t\t___logger.error({\n\t\t\t\t\t\t\tdescription: 'Path or ref required to create file.',\n\t\t\t\t\t\t\tfunc: 'constructor', obj: 'File'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthrow new Error('Path or ref required to create file.');\n\t\t\t\t\t}\n\t\t\t\t\tthis.path = this.pathArrayFromRef.join('/');\n\t\t\t\t}\n\t\t\t\tthis.pathArray = this.path.split('/');\n\t\t\t\t//Get name from data or from pathArray\n\t\t\t\tthis.name = _.has(actionData.fileData, 'name') ? actionData.fileData.name : this.pathArray[this.pathArray.length - 1];\n\t\t\t} else if (actionData && !_.isObject(actionData)) {\n\t\t\t\t___logger.error({\n\t\t\t\t\tdescription: 'Action data is not an object. Action data must be an object that includes app and fileData.',\n\t\t\t\t\tfunc: 'constructor', obj: 'File'\n\t\t\t\t});\n\t\t\t\t//TODO: Get appName from path data?\n\t\t\t\tthrow new Error('File data must be an object that includes path and appName.');\n\t\t\t} else {\n\t\t\t\t___logger.error({\n\t\t\t\t\tdescription: 'File data that includes path and app is needed to create a File action.',\n\t\t\t\t\tfunc: 'constructor', obj: 'File'\n\t\t\t\t});\n\t\t\t\tthrow new Error('File data with path and app is needed to create file action.');\n\t\t\t}\n\t\t\tthis.type = 'file';\n\t\t\t___logger.debug({\n\t\t\t\tdescription: 'File object constructed.', file: this,\n\t\t\t\tfunc: 'constructor', obj: 'File'\n\t\t\t});\n\t\t}\n\t\tget pathArrayFromRef() {\n\t\t\tif (!this.fbRef) {\n\t\t\t\t___logger.error({\n\t\t\t\t\tdescription: 'File fbRef is required to get path array.', file: this,\n\t\t\t\t\tfunc: 'pathArrayFromRef', obj: 'File'\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.fbRef.path.o;\n\t\t}\n\t\tget fileType() {\n\t\t\tif (this.ext == 'js') {\n\t\t\t\treturn 'javascript';\n\t\t\t} else {\n\t\t\t\treturn this.ext;\n\t\t\t}\n\t\t}\n\t\tget ext() {\n\t\t\tlet re = /(?:\\.([^.]+))?$/;\n\t\t\treturn re.exec(this.name)[1];\n\t\t}\n\t\tget safePathArray() {\n\t\t\tlet safeArray = this.pathArray.map((loc) => {\n\t\t\t\t//Replace periods with colons and other unsafe chars as --\n\t\t\t\treturn loc.replace(/[.]/g, ':').replace(/[#$\\[\\]]/g, '--');\n\t\t\t});\n\t\t\t___logger.log({\n\t\t\t\tdescription: 'Safe path array created.',\n\t\t\t\tsafeArray: safeArray, func: 'safePathArray', obj: 'File'\n\t\t\t});\n\t\t\treturn safeArray;\n\t\t}\n\t\tget safePath() {\n\t\t\treturn this.safePathArray.join('/');\n\t\t}\n\t\tget fbUrl() {\n\t\t\tlet url = [config.fbUrl, 'files', this.app.name, this.safePath].join('/');\n\t\t\t___logger.log({\n\t\t\t\tdescription: 'File ref url generated',\n\t\t\t\turl: url, func: 'fbRef', obj: 'File'\n\t\t\t});\n\t\t\treturn url;\n\t\t}\n\t\tget fbRef() {\n\t\t\tif (this.ref) {\n\t\t\t\t___logger.log({\n\t\t\t\t\tdescription: 'File already has reference.',\n\t\t\t\t\tref: this.ref, func: 'fbRef', obj: 'File'\n\t\t\t\t});\n\t\t\t\treturn this.ref;\n\t\t\t}\n\t\t\t___logger.warn({\n\t\t\t\tdescription: 'Fb ref generatating.',\n\t\t\t\turl: this.fbUrl, func: 'fbRef', obj: 'File'\n\t\t\t});\n\t\t\treturn new Firebase(this.fbUrl);\n\t\t}\n\t\tget headless() {\n\t\t\tif (typeof firepad === 'undefined' || typeof firepad.Headless !== 'function') {\n\t\t\t\t___logger.error({\n\t\t\t\t\tdescription: 'Firepad is required to get file content.',\n\t\t\t\t\tfunc: 'get', obj: 'File'\n\t\t\t\t});\n\t\t\t\tthrow Error('Firepad is required to get file content');\n\t\t\t} else {\n\t\t\t\treturn firepad.Headless(this.fbRef);\n\t\t\t}\n\t\t}\n\t\tget() {\n\t\t\t// TODO: Load file from firepad content\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tthis.headless.getText((text) => {\n\t\t\t\t\t___logger.warn({\n\t\t\t\t\t\tdescription: 'Text loaded from headless',\n\t\t\t\t\t\ttext: text, func: 'get', obj: 'File'\n\t\t\t\t\t});\n\t\t\t\t\tthis.content = text;\n\t\t\t\t\t// this.fbRef.once('value', (fileSnap) => {\n\t\t\t\t\t// \tlet meta = fileSnap.child('meta').val();\n\t\t\t\t\t//\n\t\t\t\t\t// });\n\t\t\t\t\tthis.headless.dispose();\n\t\t\t\t\tresolve(this);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tgetFromS3() {\n\t\t\tif (!this.app || !this.app.frontend) {\n\t\t\t\t___logger.log({\n\t\t\t\t\tdescription: 'Application Frontend data not available. Calling applicaiton get.',\n\t\t\t\t\tfunc: 'get', obj: 'File'\n\t\t\t\t});\n\t\t\t\treturn this.app.get().then((appData) => {\n\t\t\t\t\tthis.app = appData;\n\t\t\t\t\t___logger.log({\n\t\t\t\t\t\tdescription: 'Application get successful. Getting file.',\n\t\t\t\t\t\tapp: appData, func: 'get', obj: 'File'\n\t\t\t\t\t});\n\t\t\t\t\treturn this.get();\n\t\t\t\t}, (err) => {\n\t\t\t\t\t___logger.error({\n\t\t\t\t\t\tdescription: 'Application Frontend data not available.',\n\t\t\t\t\t\terror: err, func: 'get', obj: 'File'\n\t\t\t\t\t});\n\t\t\t\t\treturn Promise.reject({message: 'Front end data is required to get file.'});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//If AWS Credential do not exist, set them\n\t\t\t\tif (typeof AWS.config.credentials == 'undefined' || !AWS.config.credentials) {\n\t\t\t\t\t___logger.log({\n\t\t\t\t\t\tdescription: 'AWS creds do not exist, so they are being set.',\n\t\t\t\t\t\tfunc: 'publish', obj: 'File'\n\t\t\t\t\t});\n\t\t\t\t\t_setAWSConfig();\n\t\t\t\t}\n\t\t\t\tlet s3 = new AWS.S3();\n\t\t\t\tlet getData = {\n\t\t\t\t\tBucket: this.app.frontend.bucketName,\n\t\t\t\t\tKey: this.path\n\t\t\t\t};\n\t\t\t\t//Set contentType from actionData to ContentType parameter of new object\n\t\t\t\tif (this.contentType) {\n\t\t\t\t\tgetData.ContentType = this.contentType;\n\t\t\t\t}\n\t\t\t\t___logger.debug({\n\t\t\t\t\tdescription: 'File get params built.', getData: getData,\n\t\t\t\t\tfile: this, func: 'get', obj: 'File'\n\t\t\t\t});\n\t\t\t\tlet finalData = this;\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\ts3.getObject(getData, (err, data) => {\n\t\t\t\t\t\t//[TODO] Add putting object ACL (make public)\n\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\t___logger.info({\n\t\t\t\t\t\t\t\tdescription: 'File loaded successfully.',\n\t\t\t\t\t\t\t\tdata: data, func: 'get', obj: 'File'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (_.has(data, 'Body')) {\n\t\t\t\t\t\t\t\t___logger.info({\n\t\t\t\t\t\t\t\t\tdescription: 'File has content.',\n\t\t\t\t\t\t\t\t\tcontent: data.Body.toString(),\n\t\t\t\t\t\t\t\t\tmetaData: data.Metadata.toString(),\n\t\t\t\t\t\t\t\t\tfunc: 'get', obj: 'File'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tfinalData.content = data.Body.toString();\n\t\t\t\t\t\t\t\t___logger.info({\n\t\t\t\t\t\t\t\t\tdescription: 'File content has been added to file.',\n\t\t\t\t\t\t\t\t\tfile: finalData,\n\t\t\t\t\t\t\t\t\tfunc: 'get', obj: 'File'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tresolve(finalData);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t___logger.error({\n\t\t\t\t\t\t\t\tdescription: 'Error loading file from S3.',\n\t\t\t\t\t\t\t\terror: err, func: 'get', obj: 'File'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t//Alias for get\n\t\topen() {\n\t\t\treturn this.get();\n\t\t}\n\t\tpublish(fileData) {\n\t\t\t//TODO: Publish file to application\n\t\t\t___logger.debug({\n\t\t\t\tdescription: 'File publish called.', file: this,\n\t\t\t\tfileData: fileData, func: 'publish', obj: 'File'\n\t\t\t});\n\t\t\tif (!this.app.frontend) {\n\t\t\t\t___logger.error({\n\t\t\t\t\tdescription: 'Application Frontend data not available. Make sure to call .get().',\n\t\t\t\t\tfunc: 'publish', obj: 'File'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject({message: 'Front end data is required to publish file.'});\n\t\t\t} else {\n\t\t\t\tif (!_.has(fileData, ['content', 'path'])) {\n\t\t\t\t\t___logger.error({\n\t\t\t\t\t\tdescription: 'File data including path and content required to publish.',\n\t\t\t\t\t\tfunc: 'publish', obj: 'File'\n\t\t\t\t\t});\n\t\t\t\t\treturn Promise.reject({message: 'File data including path and content required to publish.'});\n\t\t\t\t}\n\t\t\t\tlet saveParams = {\n\t\t\t\t\tBucket: this.app.frontend.bucketName,\n\t\t\t\t\tKey: fileData.path,\n\t\t\t\t\tBody: fileData.content,\n\t\t\t\t\tACL: 'public-read'\n\t\t\t\t};\n\t\t\t\t//Set contentType from fileData to ContentType parameter of new object\n\t\t\t\tif (this.contentType) {\n\t\t\t\t\tsaveParams.ContentType = this.contentType;\n\t\t\t\t}\n\t\t\t\t//If AWS Credential do not exist, set them\n\t\t\t\tif (typeof AWS.config.credentials == 'undefined' || !AWS.config.credentials) {\n\t\t\t\t\t___logger.debug({\n\t\t\t\t\t\tdescription: 'AWS creds do not exist, so they are being set.',\n\t\t\t\t\t\tfunc: 'publish', obj: 'File'\n\t\t\t\t\t});\n\t\t\t\t\t_setAWSConfig();\n\t\t\t\t}\n\t\t\t\tlet s3 = new AWS.S3();\n\t\t\t\t___logger.debug({\n\t\t\t\t\tdescription: 'File publish params built.',\n\t\t\t\t\tsaveParams: saveParams, fileData: this,\n\t\t\t\t\tfunc: 'publish', obj: 'File'\n\t\t\t\t});\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\ts3.putObject(saveParams, (err, data) => {\n\t\t\t\t\t\t//[TODO] Add putting object ACL (make public)\n\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\t___logger.log({\n\t\t\t\t\t\t\t\tdescription: 'File saved successfully.',\n\t\t\t\t\t\t\t\tresponse: data, func: 'publish', obj: 'File'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t}\telse {\n\t\t\t\t\t\t\t___logger.error({\n\t\t\t\t\t\t\t\tdescription: 'Error saving file to S3.',\n\t\t\t\t\t\t\t\terror: err, func: 'publish', obj: 'File'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tdel() {\n\t\t\tif (!this.app || !this.app.frontend) {\n\t\t\t\t___logger.log({description: 'Application Frontend data not available. Calling applicaiton get.', func: 'get', obj: 'File'});\n\t\t\t\treturn this.app.get().then((appData) => {\n\t\t\t\t\tthis.app = appData;\n\t\t\t\t\t___logger.log({description: 'Application get successful. Getting file.', app: appData, func: 'get', obj: 'File'});\n\t\t\t\t\treturn this.get();\n\t\t\t\t}, (err) => {\n\t\t\t\t\t___logger.error({description: 'Application Frontend data not available. Make sure to call .get().', error: err, func: 'get', obj: 'File'});\n\t\t\t\t\treturn Promise.reject({message: 'Front end data is required to get file.'});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//If AWS Credential do not exist, set them\n\t\t\t\tif (typeof AWS.config.credentials == 'undefined' || !AWS.config.credentials) {\n\t\t\t\t\t___logger.debug({description: 'AWS creds do not exist, so they are being set.', func: 'publish', obj: 'File'});\n\t\t\t\t\t_setAWSConfig();\n\t\t\t\t}\n\t\t\t\tlet s3 = new AWS.S3();\n\t\t\t\tlet saveParams = {\n\t\t\t\t\tBucket: this.app.frontend.bucketName,\n\t\t\t\t\tKey: this.path\n\t\t\t\t};\n\t\t\t\t//Set contentType from actionData to ContentType parameter of new object\n\t\t\t\tif (this.contentType) {\n\t\t\t\t\tsaveParams.ContentType = this.contentType;\n\t\t\t\t}\n\t\t\t\t___logger.debug({\n\t\t\t\t\tdescription: 'File get params built.',\n\t\t\t\t\tsaveParams: saveParams, file: this,\n\t\t\t\t\tfunc: 'get', obj: 'File'\n\t\t\t\t});\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\ts3.deleteObject(saveParams, function(err, data) {\n\t\t\t\t\t\t//[TODO] Add putting object ACL (make public)\n\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\t___logger.info({\n\t\t\t\t\t\t\t\tdescription: 'File loaded successfully.',\n\t\t\t\t\t\t\t\tfileData: data, func: 'get', obj: 'File'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (_.has(data, 'Body')) {\n\t\t\t\t\t\t\t\t___logger.info({\n\t\t\t\t\t\t\t\t\tdescription: 'File has content.',\n\t\t\t\t\t\t\t\t\tfileData: data.Body.toString(), func: 'get', obj: 'File'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tresolve(data.Body.toString());\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\telse {\n\t\t\t\t\t\t\t___logger.error({\n\t\t\t\t\t\t\t\tdescription: 'Error loading file from S3.',\n\t\t\t\t\t\t\t\terror: err, func: 'get', obj: 'File'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn reject(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * @description Open file in firepad from already existing ace editor instance\n\t\t * @param {Object} Ace editor object\n\t\t */\n\t\topenInFirepad(editor) {\n\t\t\t//Load file contents from s3\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.get().then((file) => {\n\t\t\t\t\t___logger.log({\n\t\t\t\t\t\tdescription: 'File contents loaded. Opening firepad.',\n\t\t\t\t\t\teditor: editor, file: file,\n\t\t\t\t\t\tfunc: 'openInFirepad', obj: 'File'\n\t\t\t\t\t});\n\t\t\t\t\t//Open firepad from ace with file content as default\n\t\t\t\t\tlet fileFirepad = file.firepadFromAce(editor);\n\t\t\t\t\t//Wait for firepad to be ready\n\t\t\t\t\tfileFirepad.on('ready', () => {\n\t\t\t\t\t\tresolve(file);\n\t\t\t\t\t\t// firepad.setText()\n\t\t\t\t\t});\n\t\t\t\t}, (err) => {\n\t\t\t\t\t___logger.error({\n\t\t\t\t\t\tdescription: 'Valid ace editor instance required to create firepad.',\n\t\t\t\t\t\tfunc: 'openInFirepad', obj: 'File', editor: editor\n\t\t\t\t\t});\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t/**\n\t\t * @description Create firepad instance from ACE editor\n\t\t * @param {Object} Ace editor object\n\t\t */\n\t\tfirepadFromAce(editor) {\n\t\t\t//TODO:Create new Firepad instance within div\n\t\t\tif (!editor || typeof editor.setTheme !== 'function') {\n\t\t\t\t___logger.error({\n\t\t\t\t\tdescription: 'Valid ace editor instance required to create firepad.',\n\t\t\t\t\tfunc: 'fbRef', obj: 'File', editor: editor\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (typeof firepad.fromACE !== 'function') {\n\t\t\t\t___logger.error({\n\t\t\t\t\tdescription: 'Firepad does not have fromACE method.',\n\t\t\t\t\tfirepad: firepad, func: 'fbRef', obj: 'File'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet settings = {};\n\t\t\t// if (this.content) {\n\t\t\t// \tsettings.defaultText = this.content;\n\t\t\t// }\n\t\t\t//Attach logged in user id\n\t\t\t// if (matter.isLoggedIn && matter.currentUser) {\n\t\t\t// \tsettings.userId = matter.currentUser.username || matter.currentUser.name;\n\t\t\t// }\n\t\t\t___logger.warn({\n\t\t\t\tdescription: 'Creating firepad from ace.',\n\t\t\t\tsettings: settings, editor: editor, editorVal: editor.getValue(),\n\t\t\t\tfunc: 'fbRef', obj: 'File'\n\t\t\t});\n\t\t\treturn firepad.fromACE(this.fbRef, editor, settings);\n\t\t}\n\t\tgetConnectedUsers() {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.fbRef.child('users').on('value', (usersSnap) => {\n\t\t\t\t\tif (usersSnap.val() === null) {\n\t\t\t\t\t\tresolve([]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet usersArray = [];\n\t\t\t\t\t\tusersSnap.forEach((userSnap) => {\n\t\t\t\t\t\t\tlet user = userSnap.val();\n\t\t\t\t\t\t\tuser.username = userSnap.key();\n\t\t\t\t\t\t\tusersArray.push(user);\n\t\t\t\t\t\t});\n\t\t\t\t\t\t___logger.log({\n\t\t\t\t\t\t\tdescription: 'Connected users array built.',\n\t\t\t\t\t\t\tusers: usersArray, func: 'connectedUsers', obj: 'File'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresolve(usersArray);\n\t\t\t\t\t}\n\t\t\t\t}, (err) => {\n\t\t\t\t\t___logger.error({\n\t\t\t\t\t\tdescription: 'Error loading connected users.',\n\t\t\t\t\t\terror: err, func: 'connectedUsers', obj: 'File'\n\t\t\t\t\t});\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tgetDefaultContent() {\n\t\t\t//TODO: Fill with default data for matching file type\n\t\t}\n\t}\n\t//------------------ Utility Functions ------------------//\n\n\t// AWS Config\n\tfunction _setAWSConfig() {\n\t\tAWS.config.update({\n\t\t\tcredentials: new AWS.CognitoIdentityCredentials({\n\t\t\tIdentityPoolId: config.aws.cognito.poolId\n\t\t}),\n\t\t\tregion: config.aws.region\n\t\t});\n\t}\n\t//Load firepad from local or global\n\tfunction getFirepadLib() {\n\t\t___logger.warn({\n\t\t\tdescription: 'Get firepad lib called',\n\t\t\tfunc: 'fbRef', obj: 'File'\n\t\t});\n\t\tif (typeof window !== 'undefined' && window.Firepad && window.ace) {\n\t\t\treturn window.Firepad;\n\t\t} else if (typeof global !== 'undefined' && global.Firepad && global.ace) {\n\t\t\treturn global.Firepad;\n\t\t} else {\n\t\t\t___logger.warn({\n\t\t\t\tdescription: 'Firepad does not currently exist.',\n\t\t\t\tfunc: 'fbRef', obj: 'File'\n\t\t\t});\n\t\t\treturn null;\n\t\t\t//TODO: Correctly load firepad\n\t\t\t// dom.loadJs('https://cdn.firebase.com/libs/firepad/1.2.0/firepad.js');\n\t\t\t// if (typeof global !== 'undefined' && global.Firepad) {\n\t\t\t// \treturn global.Firepad;\n\t\t\t// } else if (typeof window !== 'undefined' && window.Firepad) {\n\t\t\t// \treturn window.Firepad;\n\t\t\t// } else {\n\t\t\t// \tlogger.error({\n\t\t\t// \t\tdescription: 'Adding firepad did not help.',\n\t\t\t// \t\tfunc: 'fbRef', obj: 'File'\n\t\t\t// \t});\n\t\t\t// }\n\t\t}\n\t}\n\n\t//Convenience vars\n\tlet __logger = matter.utils.logger;\n\n\tclass Files {\n\t\tconstructor(filesData) {\n\t\t\tif (filesData && _.isObject(filesData) && _.has(filesData, 'app')) { //Data is object containing directory data\n\t\t\t\tthis.app = filesData.app;\n\t\t\t} else if (filesData && _.isString(filesData)) { //Data is string name\n\t\t\t\tthis.app = {name: filesData};\n\t\t\t} else if (filesData && _.isArray(filesData)) {\n\t\t\t\t//TODO: Handle an array of files being passed as data\n\t\t\t\t__logger.error({\n\t\t\t\t\tdescription: 'Action data object with name is required to start a Files Action.',\n\t\t\t\t\tfunc: 'constructor', obj: 'Files'\n\t\t\t\t});\n\t\t\t\tthrow new Error('Files Data object with application is required to start a Files action.');\n\t\t\t} else {\n\t\t\t\t__logger.error({\n\t\t\t\t\tdescription: 'Action data object with name is required to start a Files Action.',\n\t\t\t\t\tfunc: 'constructor', obj: 'Files'\n\t\t\t\t});\n\t\t\t\tthrow new Error('Files Data object with name is required to start a Files action.');\n\t\t\t}\n\t\t\t__logger.debug({\n\t\t\t\tdescription: 'Files object constructed.',\n\t\t\t\tfunc: 'constructor', obj: 'Files'\n\t\t\t});\n\t\t}\n\t\t/**\n\t\t * @description Firebase URL for files list\n\t\t */\n\t\tget fbUrl() {\n\t\t\treturn `${config.fbUrl}/files/${this.app.name}`;\n\t\t}\n\t\t/**\n\t\t * @description Firebase reference of files list\n\t\t */\n\t\tget fbRef() {\n\t\t\t__logger.log({\n\t\t\t\tdescription: 'Url created for files fbRef.',\n\t\t\t\turl: this.fbUrl, func: 'fbRef', obj: 'Files'\n\t\t\t});\n\t\t\treturn new Firebase(this.fbUrl);\n\t\t}\n\t\t/**\n\t\t * @description Path array that is built from Firebase Reference\n\t\t * @private\n\t\t */\n\t\tget pathArrayFromFbRef() {\n\t\t\t//Handle fbUrls that have multiple levels\n\t\t\tlet removeArray = config.fbUrl.replace('https://', '').split('/');\n\t\t\tremoveArray.shift();\n\t\t\t__logger.warn({\n\t\t\t\tdescription: 'Remove array started.',\n\t\t\t\tremoveArray: removeArray, fbRefArray: this.fbRef.path.o, func: 'fbRef', obj: 'Files'\n\t\t\t});\n\t\t\tlet pathArray = this.fbRef.path.o.splice(0, removeArray.length);\n\t\t\t__logger.warn({\n\t\t\t\tdescription: 'Path array built.',\n\t\t\t\tpathArray: pathArray, func: 'fbRef', obj: 'Files'\n\t\t\t});\n\t\t\treturn pathArray;\n\t\t}\n\t\t/**\n\t\t * @description Get files list single time\n\t\t */\n\t\tget() {\n\t\t\tconsole.warn(this.pathArrayFromFbRef);\n\t\t\t__logger.log({\n\t\t\t\tdescription: 'Files get called.',\n\t\t\t\tfunc: 'get', obj: 'Files'\n\t\t\t});\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tthis.fbRef.once('value', (filesSnap) => {\n\t\t\t\t\t__logger.warn({\n\t\t\t\t\t\tdescription: 'Files loaded from firebase.',\n\t\t\t\t\t\tval: filesSnap.val(), func: 'get', obj: 'Files'\n\t\t\t\t\t});\n\t\t\t\t\tlet filesArray = [];\n\t\t\t\t\t// let filesPathArray =  this.pathArrayFromFbRef;\n\t\t\t\t\tfilesSnap.forEach((objSnap) => {\n\t\t\t\t\t\tlet objData = objSnap.hasChild('meta') ? objSnap.child('meta').val() : {path: objSnap.key()};\n\t\t\t\t\t\t//TODO: Have a better fallback for when meta does not exist\n\t\t\t\t\t\t// if (!objData.path) {\n\t\t\t\t\t\t// \tobjSnap.ref().path.o.splice(0, filesPathArray.length);\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tobjData.key = objSnap.key();\n\t\t\t\t\t\tfilesArray.push(objData);\n\t\t\t\t\t});\n\t\t\t\t\t__logger.warn({\n\t\t\t\t\t\tdescription: 'Files array built.',\n\t\t\t\t\t\tval: filesArray, func: 'get', obj: 'Files'\n\t\t\t\t\t});\n\t\t\t\t\tresolve(filesArray);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t/**\n\t\t * @description Get synced files list from firebase\n\t\t */\n\t\tsync() {\n\t\t\t// TODO: get files list from firebase\n\t\t\tconsole.warn(this.pathArrayFromFbRef);\n\t\t\t__logger.log({\n\t\t\t\tdescription: 'Files get called.',\n\t\t\t\tfunc: 'get', obj: 'Files'\n\t\t\t});\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tthis.fbRef.on('value', (filesSnap) => {\n\t\t\t\t\t__logger.warn({\n\t\t\t\t\t\tdescription: 'Files loaded from firebase.',\n\t\t\t\t\t\tval: filesSnap.val(), func: 'get', obj: 'Files'\n\t\t\t\t\t});\n\t\t\t\t\tlet filesArray = [];\n\t\t\t\t\t// let filesPathArray =  this.pathArrayFromFbRef;\n\t\t\t\t\tfilesSnap.forEach((objSnap) => {\n\t\t\t\t\t\tlet objData = objSnap.hasChild('meta') ? objSnap.child('meta').val() : {path: objSnap.key()};\n\t\t\t\t\t\t//TODO: Have a better fallback for when meta does not exist\n\t\t\t\t\t\t// if (!objData.path) {\n\t\t\t\t\t\t// \tobjSnap.ref().path.o.splice(0, filesPathArray.length);\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tobjData.key = objSnap.key();\n\t\t\t\t\t\tfilesArray.push(objData);\n\t\t\t\t\t});\n\t\t\t\t\t__logger.warn({\n\t\t\t\t\t\tdescription: 'Files array built.',\n\t\t\t\t\t\tval: filesArray, func: 'get', obj: 'Files'\n\t\t\t\t\t});\n\t\t\t\t\tresolve(filesArray);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * @description Add a new file\n\t\t */\n\t\tadd(fileData) {\n\t\t\t//TODO: Allow for options of where to add the file to\n\t\t\treturn this.addToFb(fileData);\n\t\t}\n\t\t/**\n\t\t * @description Delete file\n\t\t */\n\t\tdel(fileData) {\n\t\t\t//TODO: Delete file from S3 as well if it exists\n\t\t\treturn this.delFromFb(fileData);\n\t\t}\n\t\t/**\n\t\t * @description Get files list from S3\n\t\t */\n\t\tgetFromS3() {\n\t\t\tif (!this.app.frontend || !this.app.frontend.bucketName) {\n\t\t\t\t__logger.warn({\n\t\t\t\t\tdescription: 'Application Frontend data not available. Calling .get().',\n\t\t\t\t\tapp: this.app, func: 'getFromS3', obj: 'Files'\n\t\t\t\t});\n\t\t\t\treturn this.app.get().then((applicationData) => {\n\t\t\t\t\t__logger.log({\n\t\t\t\t\t\tdescription: 'Application get returned.',\n\t\t\t\t\t\tdata: applicationData, func: 'getFromS3', obj: 'Files'\n\t\t\t\t\t});\n\t\t\t\t\tthis.app = applicationData;\n\t\t\t\t\tif (_.has(applicationData, 'frontend')) {\n\t\t\t\t\t\treturn this.get();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t__logger.error({\n\t\t\t\t\t\t\tdescription: 'Application does not have Frontend to get files from.',\n\t\t\t\t\t\t\tfunc: 'getFromS3', obj: 'Files'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn Promise.reject({\n\t\t\t\t\t\t\tmessage: 'Application does not have frontend to get files from.'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, (err) => {\n\t\t\t\t\t__logger.error({\n\t\t\t\t\t\tdescription: 'Application Frontend data not available. Make sure to call .get().',\n\t\t\t\t\t\terror: err, func: 'getFromS3', obj: 'Files'\n\t\t\t\t\t});\n\t\t\t\t\treturn Promise.reject({\n\t\t\t\t\t\tmessage: 'Bucket name required to get objects'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//If AWS Credentials do not exist, set them\n\t\t\t\tif (typeof AWS.config.credentials == 'undefined' || !AWS.config.credentials) {\n\t\t\t\t\t// logger.info('AWS creds are being updated to make request');\n\t\t\t\t\tsetAWSConfig();\n\t\t\t\t}\n\t\t\t\tlet s3 = new AWS.S3();\n\t\t\t\tlet listParams = {Bucket: this.app.frontend.bucketName};\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\ts3.listObjects(listParams, function(err, data) {\n\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\t__logger.info({\n\t\t\t\t\t\t\t\tdescription: 'Files list loaded.', filesData: data, func: 'get', obj: 'Files'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn resolve(data.Contents);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t__logger.error({\n\t\t\t\t\t\t\t\tdescription: 'Error getting files from S3.',\n\t\t\t\t\t\t\t\terror: err, func: 'get', obj: 'Files'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn reject(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * @description Add a file to Firebase\n\t\t */\n\t\taddToFb(fileData) {\n\t\t\tif (!fileData || !fileData.path) {\n\t\t\t\t__logger.error({\n\t\t\t\t\tdescription: 'Invalid file data. Path must be included.',\n\t\t\t\t\tfunc: 'addToFb', obj: 'Files'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject({message: 'Invalid file data. Path must be included.'});\n\t\t\t}\n\t\t\tlet file = new File({app: this.app, fileData: fileData});\n\t\t\t//TODO: Handle inital content setting\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tfile.fbRef.set({meta: {path: file.path}}, (err) => {\n\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t__logger.error({\n\t\t\t\t\t\t\tdescription: 'File successfully added to Firebase.',\n\t\t\t\t\t\t\tfunc: 'addToFb', obj: 'Files'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresolve(fileData);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t__logger.error({\n\t\t\t\t\t\t\tdescription: 'Error creating file on Firebase.',\n\t\t\t\t\t\t\terror: err, func: 'addToFb', obj: 'Files'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t/**\n\t\t * @description Delete a file from Firebase\n\t\t */\n\t\tdelFromFb(fileData) {\n\t\t\tif (!fileData || !fileData.path) {\n\t\t\t\t__logger.error({\n\t\t\t\t\tdescription: 'Invalid file data. Path must be included.',\n\t\t\t\t\tfunc: 'delFromFb', obj: 'Files'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject({message: 'Invalid file data. Path must be included.'});\n\t\t\t}\n\t\t\tlet file = new File({app: this.app, fileData: fileData});\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tfile.fbRef.remove(fileData, (err) => {\n\t\t\t\t\tif (!err) {\n\t\t\t\t\t\tresolve(fileData);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tpublish() {\n\t\t\t//TODO: Publish all files\n\t\t}\n\t\t/**\n\t\t * @description build child structure from files list\n\t\t */\n\t\tbuildStructure() {\n\t\t\t__logger.debug({\n\t\t\t\tdescription: 'Build Structure called.',\n\t\t\t\tfunc: 'buildStructure', obj: 'Application'\n\t\t\t});\n\t\t\treturn this.get().then((filesArray) => {\n\t\t\t\t__logger.log({\n\t\t\t\t\tdescription: 'Child struct from array.',\n\t\t\t\t\tchildStructure: childStruct,\n\t\t\t\t\tfunc: 'buildStructure', obj: 'Application'\n\t\t\t\t});\n\t\t\t\tconst childStruct = childrenStructureFromArray(filesArray);\n\t\t\t\t//TODO: have child objects have correct classes (file/folder)\n\t\t\t\t__logger.log({\n\t\t\t\t\tdescription: 'Child struct from array.',\n\t\t\t\t\tchildStructure: childStruct,\n\t\t\t\t\tfunc: 'buildStructure', obj: 'Application'\n\t\t\t\t});\n\t\t\t\treturn childStruct;\n\t\t\t}, (err) => {\n\t\t\t\t__logger.error({\n\t\t\t\t\tdescription: 'Error getting application files.',\n\t\t\t\t\terror: err, func: 'buildStructure', obj: 'Application'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject({\n\t\t\t\t\tmessage: 'Error getting files.',\n\t\t\t\t\terror: err\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t/**\n\t\t * @description sync file structure from Firebase\n\t\t */\n\t\tsyncStructure() {\n\t\t\t//TODO: Determine if it is worth storing this in the built structure\n\t\t\t__logger.debug({\n\t\t\t\tdescription: 'Build Structure called.',\n\t\t\t\tfunc: 'syncStructure', obj: 'Application'\n\t\t\t});\n\t\t\treturn this.sync().then((filesArray) => {\n\t\t\t\t__logger.log({\n\t\t\t\t\tdescription: 'Child struct from array.',\n\t\t\t\t\tchildStructure: childStruct,\n\t\t\t\t\tfunc: 'syncStructure', obj: 'Application'\n\t\t\t\t});\n\t\t\t\tconst childStruct = childrenStructureFromArray(filesArray);\n\t\t\t\t//TODO: have child objects have correct classes (file/folder)\n\t\t\t\t__logger.log({\n\t\t\t\t\tdescription: 'Child struct from array.',\n\t\t\t\t\tchildStructure: childStruct,\n\t\t\t\t\tfunc: 'syncStructure', obj: 'Application'\n\t\t\t\t});\n\t\t\t\treturn childStruct;\n\t\t\t}, (err) => {\n\t\t\t\t__logger.error({\n\t\t\t\t\tdescription: 'Error getting application files.',\n\t\t\t\t\terror: err, func: 'syncStructure', obj: 'Application'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject({\n\t\t\t\t\tmessage: 'Error getting files.',\n\t\t\t\t\terror: err\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t//ALIAS FOR buildStructure\n\t\t// get structure() {\n\t\t// \treturn this.buildStructure();\n\t\t// }\n\t}\n\t//------------------ Utility Functions ------------------//\n\n\t// AWS Config\n\tfunction setAWSConfig() {\n\t\tAWS.config.update({\n\t\t\tcredentials: new AWS.CognitoIdentityCredentials({\n\t\t\tIdentityPoolId: config.aws.cognito.poolId\n\t\t}),\n\t\t\tregion: config.aws.region\n\t\t});\n\t}\n\t/**\n\t * @description Convert from array file structure (from S3) to 'children' structure used in Editor GUI\n\t * @private\n\t * @example\n\t * //Array structure: [{path:'index.html'}, {path:'testFolder/file.js'}]\n\t * //Children Structure [{type:'folder', name:'testfolder', children:[{path:'testFolder/file.js', name:'file.js', filetype:'javascript', contentType:'application/javascript'}]}]\n\t * var flatArray = [{path:'index.html'}, {path:'testFolder/file.js'}];\n\t * var childrenStructure = childrenStructureFromArray(flatArray);\n\t */\n\tfunction childrenStructureFromArray(fileArray) {\n\t\t// logger.log('childStructureFromArray called:', fileArray);\n\t\t//Create a object for each file that stores the file in the correct 'children' level\n\t\tvar mappedStructure = fileArray.map(function(file) {\n\t\t\treturn buildStructureObject(file);\n\t\t});\n\t\treturn combineLikeObjs(mappedStructure);\n\t}\n\t/**\n\t * @description Convert file with key into a folder/file children object\n\t * @private\n\t */\n\tfunction buildStructureObject(file) {\n\t\tvar pathArray;\n\t\t// console.log('buildStructureObject with:', file);\n\t\tif (_.has(file, 'path')) {\n\t\t\t//Coming from files already having path (structure)\n\t\t\tpathArray = file.path.split('/');\n\t\t} else if (_.has(file, 'Key')) {\n\t\t\t//Coming from aws\n\t\t\tpathArray = file.Key.split('/');\n\t\t\t// console.log('file before pick:', file);\n\t\t\tfile = _.pick(file, 'Key');\n\t\t\tfile.path = file.Key;\n\t\t\tfile.name = file.Key;\n\t\t} else {\n\t\t\tconsole.error('Invalid file.', file);\n\t\t}\n\t\tvar currentObj = file;\n\t\tif (pathArray.length == 1) {\n\t\t\tcurrentObj.name = pathArray[0];\n\t\t\tif (!_.has(currentObj,'type')) {\n\t\t\t\tcurrentObj.type = 'file';\n\t\t\t}\n\t\t\tcurrentObj.path = pathArray[0];\n\t\t\treturn currentObj;\n\t\t} else {\n\t\t\tvar finalObj = {};\n\t\t\t_.each(pathArray, (loc, ind, list) => {\n\t\t\t\tif (ind != list.length - 1) {//Not the last loc\n\t\t\t\t\tcurrentObj.name = loc;\n\t\t\t\t\tcurrentObj.path = _.take(list, ind + 1).join('/');\n\t\t\t\t\tcurrentObj.type = 'folder';\n\t\t\t\t\tcurrentObj.children = [{}];\n\t\t\t\t\t//TODO: Find out why this works\n\t\t\t\t\tif (ind == 0) {\n\t\t\t\t\t\tfinalObj = currentObj;\n\t\t\t\t\t}\n\t\t\t\t\tcurrentObj = currentObj.children[0];\n\t\t\t\t} else {\n\t\t\t\t\tcurrentObj.type = 'file';\n\t\t\t\t\tcurrentObj.name = loc;\n\t\t\t\t\tcurrentObj.path = pathArray.join('/');\n\t\t\t\t\tif (file.$id) {\n\t\t\t\t\t\tcurrentObj.$id = file.$id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn finalObj;\n\t\t}\n\t}\n\t/**\n\t * @description Recursivley combine children of object's that have the same names\n\t * @private\n\t */\n\tfunction combineLikeObjs(mappedArray) {\n\t\tvar takenNames = [];\n\t\tvar finishedArray = [];\n\t\t_.each(mappedArray, (obj) => {\n\t\t\tif (takenNames.indexOf(obj.name) == -1) {\n\t\t\t\ttakenNames.push(obj.name);\n\t\t\t\tfinishedArray.push(obj);\n\t\t\t} else {\n\t\t\t\tvar likeObj = _.findWhere(mappedArray, {name: obj.name});\n\t\t\t\t//Combine children of like objects\n\t\t\t\tlikeObj.children = _.union(obj.children, likeObj.children);\n\t\t\t\tlikeObj.children = combineLikeObjs(likeObj.children);\n\t\t\t\t// logger.log('extended obj:',likeObj);\n\t\t\t}\n\t\t});\n\t\treturn finishedArray;\n\t}\n\n\t//Convenience vars\n\tlet _request = matter.utils.request;\n\tlet _logger = matter.utils.logger;\n\n\t/**\n\t * Application class.\n\t *\n\t */\n\tclass Application {\n\t\tconstructor(appData) {\n\t\t\t//Setup application data based on input\n\t\t\tif (appData && _.isObject(appData)) {\n\t\t\t\t_.extend(this, appData);\n\t\t\t} else if (appData && _.isString(appData)) {\n\t\t\t\tthis.name = appData;\n\t\t\t}\n\t\t\tif (Firebase && _.has(config, 'fbUrl') && _.has(this, 'name')) {\n\t\t\t\tthis.fbUrl = `${config.fbUrl}/${this.name}`;\n\t\t\t\tthis.fbRef = new Firebase(this.fbUrl);\n\t\t\t}\n\t\t\t// logger.debug({description: 'Application object created.', application: this, func: 'constructor', obj: 'Application'});\n\t\t}\n\t\tget appEndpoint() {\n\t\t\treturn `${matter.endpoint}/apps/${this.name}`;\n\t\t}\n\t\t//Get applications or single application\n\t\tget() {\n\t\t\t_logger.debug({\n\t\t\t\tdescription: 'Application get called.', func: 'get', obj: 'Application'\n\t\t\t});\n\t\t\treturn _request.get(this.appEndpoint).then((response) => {\n\t\t\t\t_logger.info({\n\t\t\t\t\tdescription: 'Application loaded successfully.', response: response,\n\t\t\t\t\tapplication: new Application(response), func: 'get', obj: 'Application'\n\t\t\t\t});\n\t\t\t\treturn new Application(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_logger.error({\n\t\t\t\t\tdescription: 'Error getting Application.',\n\t\t\t\t\tmessage: errRes.response.text ,error: errRes,\n\t\t\t\t\tfunc: 'get', obj: 'Application'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(errRes.response.text || errRes.response);\n\t\t\t});\n\t\t}\n\t\t//Update an application\n\t\tupdate(appData) {\n\t\t\t_logger.debug({\n\t\t\t\tdescription: 'Application update called.',\n\t\t\t\tfunc: 'update', obj: 'Application'\n\t\t\t});\n\t\t\treturn _request.put(this.appEndpoint, appData).then((response) => {\n\t\t\t\t_logger.info({\n\t\t\t\t\tdescription: 'Application updated successfully.',\n\t\t\t\t\tresponse: response, func: 'update', obj: 'Application'\n\t\t\t\t});\n\t\t\t\treturn new Application(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_logger.error({\n\t\t\t\t\tdescription: 'Error updating application.',\n\t\t\t\t\terror: errRes, func: 'update', obj: 'Application'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(errRes.response.text || errRes.response);\n\t\t\t});\n\t\t}\n\n\t\taddStorage() {\n\t\t\t_logger.debug({\n\t\t\t\tdescription: 'Application add storage called.', application: this,\n\t\t\t\tfunc: 'addStorage', obj: 'Application'\n\t\t\t});\n\t\t\treturn _request.post(`${this.appEndpoint}/storage`, {}).then((response) => {\n\t\t\t\t_logger.info({\n\t\t\t\t\tdescription: 'Storage successfully added to application.',\n\t\t\t\t\tresponse: response, application: new Application(response),\n\t\t\t\t\tfunc: 'addStorage', obj: 'Application'\n\t\t\t\t});\n\t\t\t\treturn new Application(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_logger.error({\n\t\t\t\t\tdescription: 'Error adding storage to application.',\n\t\t\t\t\terror: errRes, func: 'addStorage', obj: 'Application'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(errRes.response.text || errRes.response);\n\t\t\t});\n\t\t}\n\t\tapplyTemplate() {\n\t\t\t_logger.error({\n\t\t\t\tdescription: 'Applying templates to existing applications is not currently supported.',\n\t\t\t\tfunc: 'applyTemplate', obj: 'Application'\n\t\t\t});\n\t\t\treturn _request.post(this.appEndpoint, {}).then((response) => {\n\t\t\t\t_logger.info({\n\t\t\t\t\tdescription: 'Template successfully applied to application.',\n\t\t\t\t\tresponse: response, application: this,\n\t\t\t\t\tfunc: 'applyTemplate', obj: 'Application'\n\t\t\t\t});\n\t\t\t\treturn new Application(response);\n\t\t\t})['catch']((errRes) => {\n\t\t\t\t_logger.error({\n\t\t\t\t\tdescription: 'Error applying template to application.',\n\t\t\t\t\terror: errRes, application: this,\n\t\t\t\t\tfunc: 'applyTemplate', obj: 'Application'\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(errRes.response.text || errRes.response);\n\t\t\t});\n\t\t}\n\t\t//Files object that contains files methods\n\t\tget Files() {\n\t\t\t_logger.debug({\n\t\t\t\tdescription: 'Applications files action called.',\n\t\t\t\tapplication: this, func: 'files', obj: 'Application'\n\t\t\t});\n\t\t\treturn new Files({app: this});\n\t\t}\n\t\tFile(fileData) {\n\t\t\t_logger.debug({\n\t\t\t\tdescription: 'Applications file action called.',\n\t\t\t\tfileData: fileData, application: this,\n\t\t\t\tfunc: 'file', obj: 'Application'\n\t\t\t});\n\t\t\treturn new File({app: this, fileData: fileData});\n\t\t}\n\t\tget Users() {\n\t\t\t_logger.debug({\n\t\t\t\tdescription: 'Applications users action called.',\n\t\t\t\tapplication: this, func: 'user', obj: 'Application'\n\t\t\t});\n\t\t\treturn new AccountsAction({app: this});\n\t\t}\n\t\tUser(userData) {\n\t\t\t_logger.debug({\n\t\t\t\tdescription: 'Applications user action called.',\n\t\t\t\tuserData: userData, application: this, func: 'user',\n\t\t\t\tobj: 'Application'\n\t\t\t});\n\t\t\treturn new Account({app: this, userData: userData});\n\t\t}\n\t\tget Accounts() {\n\t\t\t_logger.debug({\n\t\t\t\tdescription: 'Applications account action called.',\n\t\t\t\tapplication: this, func: 'user', obj: 'Application'\n\t\t\t});\n\t\t\treturn new AccountsAction({app: this});\n\t\t}\n\t\tAccount(userData) {\n\t\t\t_logger.debug({\n\t\t\t\tdescription: 'Applications account action called.',\n\t\t\t\tuserData: userData, application: this,\n\t\t\t\tfunc: 'user', obj: 'Application'\n\t\t\t});\n\t\t\treturn new Account({app: this, userData: userData});\n\t\t}\n\t\tget Groups() {\n\t\t\t_logger.debug({\n\t\t\t\tdescription: 'Applications groups action called.',\n\t\t\t\tapplication: this, func: 'groups', obj: 'Application'\n\t\t\t});\n\t\t\treturn new GroupsAction({app: this});\n\t\t}\n\t\tGroup(groupData) {\n\t\t\t_logger.debug({\n\t\t\t\tdescription: 'Applications group action called.',\n\t\t\t\tgroupData: groupData, application: this,\n\t\t\t\tfunc: 'group', obj: 'Application'\n\t\t\t});\n\t\t\treturn new Group({app: this, groupData: groupData});\n\t\t}\n\t\tget Directories() {\n\t\t\t_logger.debug({\n\t\t\t\tdescription: 'Applications directories action called.',\n\t\t\t\tapplication: this, func: 'directories', obj: 'Application'\n\t\t\t});\n\t\t\treturn new DirectoriesAction({app: this});\n\t\t}\n\t\tDirectory(directoryData) {\n\t\t\t_logger.debug({\n\t\t\t\tdescription: 'Applications directory action called.',\n\t\t\t\tdirectoryData: directoryData, application: this,\n\t\t\t\tfunc: 'directory', obj: 'Application'\n\t\t\t});\n\t\t\treturn new Directory({app: this, directoryData: directoryData});\n\t\t}\n\t}\n\n\tlet request = matter.utils.request;\n\tlet logger = matter.utils.logger;\n\n\t//Actions for applications list\n\tclass AppsAction {\n\t\tconstructor() {\n\t\t\t//Call matter with name and settings\n\t\t}\n\t\tget appsEndpoint() {\n\t\t\treturn `${matter.endpoint}/apps`;\n\t\t}\n\t\t//Get applications or single application\n\t\tget() {\n\t\t\tlogger.debug({description: 'Apps get called.', action: this, func: 'get', obj: 'AppsAction'});\n\t\t\treturn request.get(this.appsEndpoint).then((response) => {\n\t\t\t\tlogger.info({description: 'Apps data loaded successfully.', response: response, func: 'get', obj: 'AppsAction'});\n\t\t\t\t//TODO: Return application object\n\t\t\t\t// return new Application(response);\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\tlogger.error({description: 'Error getting apps data.', error: errRes, func: 'get', obj: 'AppsAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t//Add an application\n\t\tadd(appData) {\n\t\t\tlogger.debug({description: 'Application add called.', appData: appData, func: 'add', obj: 'AppsAction'});\n\t\t\treturn matter.utils.request.post(this.appsEndpoint, appData).then((response) => {\n\t\t\t\tlogger.info({description: 'Application added successfully.', response: response, func: 'add', obj: 'AppsAction'});\n\t\t\t\t// TODO: Return application object\n\t\t\t\t// return new Application(response);\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\tlogger.error({description: 'Error adding app.', error: errRes, func: 'add', obj: 'AppsAction'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**Grout Client Class\n\t * @ description Extending matter provides token storage and login/logout/signup capabilities\n\t */\n\tclass Grout extends Matter {\n\t\t//TODO: Use getter/setter to make this not a function\n\t\tconstructor() {\n\t\t\t//Call matter with tessellate\n\t\t\tsuper(config.appName, config.matterOptions);\n\t\t}\n\t\t//Start a new Apps Action\n\t\tget Apps() {\n\t\t\tthis.utils.logger.debug({\n\t\t\t\tdescription: 'Apps Action called.', action: new AppsAction(),\n\t\t\t\tfunc: 'Apps', obj: 'Grout'\n\t\t\t});\n\t\t\treturn new AppsAction();\n\t\t}\n\t\t//Start a new App action\n\t\tApp(appName) {\n\t\t\tthis.utils.logger.debug({\n\t\t\t\tdescription: 'Application action called.',\n\t\t\t\tappName: appName, template: new Application(appName),\n\t\t\t\tfunc: 'App', obj: 'Grout'\n\t\t\t});\n\t\t\treturn new Application(appName);\n\t\t}\n\t\t//Start a new Apps Action\n\t\tget Templates() {\n\t\t\tthis.utils.logger.debug({\n\t\t\t\tdescription: 'Templates Action called.',\n\t\t\t\taction: new TemplatesAction(), func: 'Templates', obj: 'Grout'\n\t\t\t});\n\t\t\treturn new TemplatesAction();\n\t\t}\n\t\t//Start a new App action\n\t\tTemplate(templateData) {\n\t\t\tthis.utils.logger.debug({\n\t\t\t\tdescription: 'Template Action called.', templateData: templateData,\n\t\t\t\ttemplate: new Template(templateData), func: 'Template', obj: 'Grout'\n\t\t\t});\n\t\t\treturn new Template(templateData);\n\t\t}\n\t\t//Start a new Accounts action\n\t\tget Accounts() {\n\t\t\tthis.utils.logger.debug({\n\t\t\t\tdescription: 'Account Action called.',\n\t\t\t\taction: new AccountsAction(), func: 'users', obj: 'Grout'\n\t\t\t});\n\t\t\treturn new AccountsAction();\n\t\t}\n\t\t//Start a new Account action\n\t\tAccount(userData) {\n\t\t\tthis.utils.logger.debug({\n\t\t\t\tdescription: 'Account Action called.',\n\t\t\t\tuserData: userData, user: new Account(userData),\n\t\t\t\tfunc: 'user', obj: 'Grout'\n\t\t\t});\n\t\t\treturn new Account(userData);\n\t\t}\n\t\t//ALIAS OF ACCOUNTS\n\t\t//Start a new Accounts action\n\t\tget Users() {\n\t\t\tthis.utils.logger.debug({\n\t\t\t\tdescription: 'Accounts Action called.',\n\t\t\t\taction: new AccountsAction(), func: 'Users', obj: 'Grout'\n\t\t\t});\n\t\t\treturn new AccountsAction();\n\t\t}\n\t\t//ALIAS OF ACCOUNT\n\t\t//Start a new Account action\n\t\tUser(userData) {\n\t\t\tthis.utils.logger.debug({\n\t\t\t\tdescription: 'Account Action called.',\n\t\t\t\tuserData: userData, user: new Account(userData),\n\t\t\t\tfunc: 'user', obj: 'Grout'\n\t\t\t});\n\t\t\treturn new Account(userData);\n\t\t}\n\t\t//Start a new Groups action\n\t\tget Groups() {\n\t\t\tthis.utils.logger.debug({\n\t\t\t\tdescription: 'Groups Action called.',\n\t\t\t\taction: new GroupsAction(), func: 'groups', obj: 'Grout'\n\t\t\t});\n\t\t\treturn new GroupsAction();\n\t\t}\n\t\t//Start a new Group action\n\t\tGroup(groupData) {\n\t\t\tthis.utils.logger.debug({\n\t\t\t\tdescription: 'Group Action called.', groupData: groupData,\n\t\t\t\taction: new Group({app: this, groupData: groupData}),\n\t\t\t\tfunc: 'group', obj: 'Grout'\n\t\t\t});\n\t\t\treturn new Group(groupData);\n\t\t}\n\t\t//Start a new Directories action\n\t\tget Directories() {\n\t\t\tthis.utils.logger.debug({\n\t\t\t\tdescription: 'Directories Action called.',\n\t\t\t\taction: new DirectoriesAction(), func: 'directories', obj: 'Grout'\n\t\t\t});\n\t\t\treturn new DirectoriesAction();\n\t\t}\n\t\t//Start a new Group action\n\t\tDirectory(directoryData) {\n\t\t\tthis.utils.logger.debug({\n\t\t\t\tdescription: 'Directory Action called.', directoryData: directoryData,\n\t\t\t\taction: new Directory(directoryData), func: 'directory', obj: 'Grout'\n\t\t\t});\n\t\t\treturn new Directory(directoryData);\n\t\t}\n\t}\n\n\treturn Grout;\n\n}));"],"sourceRoot":"/source/"}