function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _get=function(e,t,r){for(var n=!0;n;){var o=e,i=t,s=r;a=c=u=void 0,n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,r=s,n=!0}},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("jwt-decode"),require("superagent"),require("firebase")):"function"==typeof define&&define.amd?define(["lodash","jwt-decode","superagent","firebase"],t):e.Grout=t(e._,e.jwtDecode,e.superagent,e.Firebase)}(this,function(e,t,r,n){"use strict";function o(t){var r="",n={};e.isObject(t)?(e.has(t,"func")&&(r+=e.has(t,"obj")?"["+t.obj+"."+t.func+"()] ":e.has(t,"file")?"["+t.file+" > "+t.func+"()] ":"["+t.func+"()] "),e.each(e.omit(e.keys(t)),function(o,i,s){"func"!=o&&"obj"!=o&&("description"==o||"message"==o?r+=t[o]:n[o]=e.isString(t[o])?t[o]:t[o])}),r+="\n"):e.isString(t)&&(r=t);var o=[r,n];return o}function i(e){var r=void 0;if(e&&""!=e)try{r=t(e)}catch(n){throw f.error({description:"Error decoding token.",data:r,error:n,func:"decodeToken",file:"token"}),new Error("Invalid token string.")}return r}function s(e){return new Promise(function(t,r){e.end(function(e,n){return e?(401==e.status&&console.warn("Unauthorized. You must be signed into make this request."),r(e)):t(n.body)})})}function a(e){return m.string&&(e=e.set("Authorization","Bearer "+m.string),console.info({message:"Set auth header",func:"addAuthHeader",file:"request"})),e}function u(){AWS.config.update({credentials:new AWS.CognitoIdentityCredentials({IdentityPoolId:y.aws.cognito.poolId}),region:y.aws.region})}function c(e){var t=e.map(function(e){return l(e)});return p(t)}function l(t){var r;e.has(t,"path")?r=t.path.split("/"):(r=t.Key.split("/"),t=e.pick(t,"Key"),t.path=t.Key,t.name=t.Key);var n=t;if(1==r.length)return n.name=r[0],e.has(n,"type")||(n.type="file"),n.path=r[0],n;var o={};return e.each(r,function(i,s,a){s!=a.length-1?(n.name=i,n.path=e.first(a,s+1).join("/"),n.type="folder",n.children=[{}],0==s&&(o=n),n=n.children[0]):(n.type="file",n.name=i,n.path=r.join("/"),t.$id&&(n.$id=t.$id))}),o}function p(t){var r=[],n=[];return e.each(t,function(o,i,s){if(-1==r.indexOf(o.name))r.push(o.name),n.push(o);else{var a=e.findWhere(t,{name:o.name});a.children=e.union(o.children,a.children),a.children=p(a.children)}}),n}e="default"in e?e["default"]:e,t="default"in t?t["default"]:t,r="default"in r?r["default"]:r,n="default"in n?n["default"]:n;var d={serverUrl:"http://tessellate.elasticbeanstalk.com",tokenName:"tessellate",tokenDataName:"tessellate-tokenData",tokenUserDataName:"tessellate-currentUser"},f={log:function(e){var t=o(e);"local"==d.envName?console.log(e):console.log.apply(console,t)},info:function(e){var t=o(e);"local"==d.envName?console.info(e):console.info.apply(console,t)},warn:function(e){var t=o(e);"local"==d.envName?console.warn(e):console.warn.apply(console,t)},debug:function(e){var t=o(e);"local"==d.envName?console.log(e):console.log.apply(console,t)},error:function(e){var t=o(e);"local"==d.envName?console.error(e):console.error.apply(console,t)}},g={},h=Object.defineProperties({item:function(e,t){return this.setItem(e,t)},setItem:function(t,r){g[t]=r,this.localExists&&(e.isObject(r)&&(r=JSON.stringify(r)),window.sessionStorage.setItem(t,r))},getItem:function(e){if(g[e])return g[e];if(this.localExists){var t=window.sessionStorage.getItem(e);if(t){var r=!1,n=null;try{n=JSON.parse(t),r=!0}catch(o){r=!1}if(r)return n}return t}return null},removeItem:function(e){if(g[e]&&(g[e]=null),this.localExists)try{window.sessionStorage.removeItem(e)}catch(t){f.error({description:"Error removing item from session storage",error:t,obj:"storage",func:"removeItem"})}},clear:function(){if(g={},this.localExists)try{window.sessionStorage.clear()}catch(e){f.warn("Session storage could not be cleared.",e)}}},{localExists:{get:function(){var e="test";if("undefined"==typeof window||"undefined"==typeof window.sessionStorage)return!1;try{return window.sessionStorage.setItem(e,"1"),window.sessionStorage.removeItem(e),!0}catch(t){return f.error({description:"Error saving to session storage",error:t,obj:"storage",func:"localExists"}),!1}},configurable:!0,enumerable:!0}}),m=Object.defineProperties({save:function(e){this.string=e},"delete":function(){h.removeItem(d.tokenName),h.removeItem(d.tokenDataName),f.log({description:"Token was removed.",func:"delete",obj:"token"})}},{string:{get:function(){return h.getItem(d.tokenName)},set:function(e){f.log({description:"Token was set.",token:e,func:"string",obj:"token"}),this.data=t(e),h.setItem(d.tokenName,e)},configurable:!0,enumerable:!0},data:{get:function(){return h.getItem(d.tokenDataName)?h.getItem(d.tokenDataName):i(this.string)},set:function(t){if(e.isString(t)){var r=t;t=i(r),f.info({description:"Token data was set as string. Decoding token.",token:r,tokenData:t,func:"data",obj:"token"})}else f.log({description:"Token data was set.",data:t,func:"data",obj:"token"}),h.setItem(d.tokenDataName,t)},configurable:!0,enumerable:!0}}),v={get:function(e,t){var n=r.get(e);return t&&n.query(t),n=a(n),s(n)},post:function(e,t){var n=r.post(e).send(t);return n=a(n),s(n)},put:function(e,t){var n=r.put(e).send(t);return n=a(n),s(n)},del:function(e,t){var n=r.put(e).send(t);return n=a(n),s(n)}},k=function(){function t(e,r){if(_classCallCheck(this,t),!e)throw f.error({description:"Application name requires to use Matter.",func:"constructor",obj:"Matter"}),new Error("Application name is required to use Matter");this.name=e,r&&(this.options=r)}return _createClass(t,[{key:"signup",value:function(t){return v.post(this.endpoint+"/signup",t).then(function(r){return f.log({description:"Account request successful.",signupData:t,response:r,func:"signup",obj:"Matter"}),e.has(r,"account")?r.account:(f.warn({description:"Account was not contained in signup response.",signupData:t,response:r,func:"signup",obj:"Matter"}),r)})["catch"](function(e){return f.error({description:"Error requesting signup.",signupData:t,error:e,func:"signup",obj:"Matter"}),Promise.reject(e)})}},{key:"login",value:function(t){var r=this;return t&&t.password&&t.username?v.put(this.endpoint+"/login",t).then(function(t){return e.has(t,"data")&&e.has(t.data,"status")&&409==t.data.status?(f.warn({description:"Account not found.",response:t,func:"login",obj:"Matter"}),Promise.reject(t.data)):(f.log({description:"Successful login.",response:t,func:"login",obj:"Matter"}),e.has(t,"token")&&(r.token.string=t.token),e.has(t,"account")&&r.storage.setItem(d.tokenUserDataName,t.account),t.account)})["catch"](function(e){return f.error({description:"Error requesting login.",error:e,status:e.status,func:"login",obj:"Matter"}),(409==e.status||400==e.status)&&(e=e.response.text),Promise.reject(e)}):(f.error({description:"Username/Email and Password are required to login",func:"login",obj:"Matter"}),Promise.reject({message:"Username/Email and Password are required to login"}))}},{key:"logout",value:function(){var e=this;return v.put(this.endpoint+"/logout").then(function(t){return f.log({description:"Logout successful.",response:t,func:"logout",obj:"Matter"}),e.currentUser=null,e.token["delete"](),t})["catch"](function(t){return f.error({description:"Error requesting log out: ",error:t,func:"logout",obj:"Matter"}),e.storage.removeItem(d.tokenUserDataName),e.token["delete"](),Promise.reject(t)})}},{key:"getCurrentUser",value:function(){var e=this;return this.storage.item(d.tokenUserDataName)?Promise.resove(this.storage.getItem(d.tokenUserDataName)):this.isLoggedIn?v.get(this.endpoint+"/user").then(function(t){return f.log({description:"Current User Request responded.",responseData:t,func:"currentUser",obj:"Matter"}),e.currentUser=t,t})["catch"](function(e){return 401==err.status?(f.warn({description:"Called for current user without token.",error:e,func:"currentUser",obj:"Matter"}),Promise.resolve(null)):(f.error({description:"Error requesting current user.",error:e,func:"currentUser",obj:"Matter"}),Promise.reject(e))}):Promise.resolve(null)}},{key:"updateProfile",value:function(e){var t=this;return this.isLoggedIn?(f.warn({description:"Calling update endpoint.",endpoint:this.endpoint+"/user/"+this.token.data.username,func:"updateProfile",obj:"Matter"}),v.put(this.endpoint+"/user/"+this.token.data.username,e).then(function(e){return f.log({description:"Update profile request responded.",responseData:e,func:"updateProfile",obj:"Matter"}),t.currentUser=e,e})["catch"](function(e){return f.error({description:"Error requesting current user.",error:e,func:"updateProfile",obj:"Matter"}),Promise.reject(e)})):(f.error({description:"No current user profile to update.",func:"updateProfile",obj:"Matter"}),Promise.reject({message:"Must be logged in to update profile."}))}},{key:"isInGroup",value:function(t){var r=this;if(!this.isLoggedIn)return f.log({description:"No logged in user to check.",func:"isInGroup",obj:"Matter"}),!1;if(!t||!e.isString(t))return t&&e.isArray(t)?(f.info({description:"Array of groups.",list:t,func:"isInGroup",obj:"Matter"}),this.isInGroups(t)):!1;var n=function(){var n=t,o=n.split(",");if(o.length>1)return f.info({description:"String list of groups.",list:o,func:"isInGroup",obj:"Matter"}),{v:r.isInGroups(o)};var i=r.token.data.groups||[];return f.log({description:"Checking if user is in group.",group:n,userGroups:r.token.data.groups||[],func:"isInGroup",obj:"Matter"}),{v:e.any(i,function(e){return n==e.name})}}();return"object"==typeof n?n.v:void 0}},{key:"isInGroups",value:function(t){var r=this;if(t&&e.isArray(t))return e.map(t,function(t){return r.isInGroup(e.isString(t)?t:t.name)});if(t&&e.isString(t)){var n=t.split(",");return n.length>1?this.isInGroups(n):this.isInGroup(n[0])}f.error({description:"Invalid groups list.",func:"isInGroups",obj:"Matter"})}},{key:"endpoint",get:function(){var t=d.serverUrl;return e.has(this,"options")&&this.options.localServer&&(t="http://localhost:4000",f.info({description:"LocalServer option was set to true. Now server url is local server.",url:t,func:"endpoint",obj:"Matter"})),"tessellate"==this.name?window&&e.has(window,"location")&&window.location.host==t&&(t="",f.info({description:"Host is Server, serverUrl simplified!",url:t,func:"endpoint",obj:"Matter"})):(t=d.serverUrl+"/apps/"+this.name,f.info({description:"Server url set.",url:t,func:"endpoint",obj:"Matter"})),t}},{key:"currentUser",set:function(e){f.log({description:"Current User set.",user:e,func:"currentUser",obj:"Matter"}),this.storage.setItem(d.tokenUserDataName,e)},get:function(){return this.storage.getItem(d.tokenUserDataName)?this.storage.getItem(d.tokenUserDataName):null}},{key:"storage",get:function(){return h}},{key:"token",get:function(){return m}},{key:"utils",get:function(){return{logger:f,request:v,storage:h}}},{key:"isLoggedIn",get:function(){return this.token.string?!0:!1}}]),t}(),y={serverUrl:"http://tessellate.elasticbeanstalk.com",tokenName:"grout",fbUrl:"https://pruvit.firebaseio.com/",appName:"tessellate",matterOptions:{localServer:!0},aws:{region:"us-east-1",cognito:{poolId:"us-east-1:72a20ffd-c638-48b0-b234-3312b3e64b2e",params:{AuthRoleArn:"arn:aws:iam::823322155619:role/Cognito_TessellateUnauth_Role",UnauthRoleArn:"arn:aws:iam::823322155619:role/Cognito_TessellateAuth_Role"}}}},b=new k(y.appName,y.matterOptions),j=function(){function e(t){if(_classCallCheck(this,e),!t)throw console.error("Username is required to start an GroupAction"),new Error("Username is required to start an GroupAction");this.username=t}return _createClass(e,[{key:"get",value:function(){return b.utils.request.get(this.userEndpoint).then(function(e){return console.log("[MatterClient.user().get()] App(s) data loaded:",e),e})["catch"](function(e){return console.error("[MatterClient.user().get()] Error getting users list: ",e),Promise.reject(e)})}},{key:"update",value:function(e){return b.utils.request.put(this.userEndpoint,e).then(function(e){return console.log("[MatterClient.users().update()] App:",e),e})["catch"](function(e){return console.error("[MatterClient.users().update()] Error updating user: ",e),Promise.reject(e)})}},{key:"del",value:function(e){console.error("Deleting a user is currently disabled.")}},{key:"userEndpoint",get:function(){return b.endpoint+"/users/"+this.username}}]),e}(),w=b.utils.logger,A=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"get",value:function(){return console.log({description:"Users get called.",func:"get",obj:"GroupsAction"}),b.utils.request.get(this.usersEndpoint).then(function(e){return console.log("users loaded:",e),e})["catch"](function(e){return console.error("error getting users"),Promise.reject(e)})}},{key:"add",value:function(e){return this.utils.request.post(this.usersEndpoint,e).then(function(e){return console.log("[MatterClient.users().add()] Application added successfully: ",e),new Application(e)})["catch"](function(e){return console.error("[MatterClient.getApps()] Error adding application: ",e),Promise.reject(e)})}},{key:"search",value:function(t){console.log("search called:",t);var r=this.usersEndpoint+"/search/";return t&&e.isString(t)&&(r+=t),t&&""!=t?b.utils.request.get(r).then(function(e){return console.log("[MatterClient.users().search()] Users(s) data loaded:",e),e})["catch"](function(e){return console.error("[MatterClient.users().search()] Error getting users list: ",e),Promise.reject(e)}):(w.log({description:"Null query, returning empty array.",func:"search",obj:"GroupsAction"}),Promise.resolve([]))}},{key:"usersEndpoint",get:function(){return b.endpoint+"/users"}}]),t}(),C=b.utils.logger,E=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"get",value:function(){return console.log({description:"Users get called.",func:"get",obj:"UsersAction"}),b.utils.request.get(this.usersEndpoint).then(function(e){return console.log("users loaded:",e),e})["catch"](function(e){return console.error("error getting users"),Promise.reject(e)})}},{key:"add",value:function(e){return this.utils.request.post(this.usersEndpoint,e).then(function(e){return console.log("[MatterClient.users().add()] Application added successfully: ",e),new Application(e)})["catch"](function(e){return console.error("[MatterClient.getApps()] Error adding application: ",e),Promise.reject(e)})}},{key:"search",value:function(t){console.log("search called:",t);var r=this.usersEndpoint+"/search/";return t&&e.isString(t)&&(r+=t),t&&""!=t?b.utils.request.get(r).then(function(e){return console.log("[MatterClient.users().search()] Users(s) data loaded:",e),e})["catch"](function(e){return console.error("[MatterClient.users().search()] Error getting users list: ",e),Promise.reject(e)}):(C.log({description:"Null query, returning empty array.",func:"search",obj:"UsersAction"}),Promise.resolve([]))}},{key:"usersEndpoint",get:function(){return b.endpoint+"/users"}}]),t}(),P=function(){function e(t){_classCallCheck(this,e),this.name=t.name,this.owner=t.owner||null,this.collaborators=t.collaborators||[],this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.frontend=t.frontend||{},this.backend=t.backend||{},this.groups=t.groups||null,this.directories=t.directories||null,n&&(this.fbRef=new n(y.fbUrl+t.name))}return _createClass(e,[{key:"getStructure",value:function(){return this.getFiles().then(function(e){var t=c(e);return console.log("Child struct from array:",t),t},function(e){return console.error("[Application.getStructure] Error getting files: ",e),Promise.reject({message:"Error getting files.",error:e})})}},{key:"getFiles",value:function(){if(this.frontend&&this.frontend.bucketName){"undefined"!=typeof AWS.config.credentials&&AWS.config.credentials||u();var e=new AWS.S3,t={Bucket:this.frontend.bucketName};return new Promise(function(r,n){e.listObjects(t,function(e,t){return e?(console.error("[Application.getObjects()] Error listing objects:",e),n(e)):(console.log("[Application.getObjects()] listObjects returned:",t),r(t.Contents))})})}return console.error("[Applicaiton.getFiles] Attempting to get objects for bucket without name."),Promise.reject({message:"Bucket name required to get objects"})}},{key:"publishFile",value:function(e){if(!this.frontend)return console.error("Frontend data not available. Make sure to call .get()."),Promise.reject({message:"Front end data is required to publish file."});var t={Bucket:this.frontent.bucketName,Key:e.key,Body:e.content,ACL:"public-read"};return e.contentType&&(t.ContentType=e.contentType),s3.putObject(t,function(e,t){return e?(console.error("[Application.publishFile()] Error saving file:",e),Promise.reject(e)):(console.log("[Application.publishFile()] file saved successfully. Returning:",t),t)})}},{key:"addStorage",value:function(){var t=y.serverUrl+"/apps/"+this.name+"/storage";return b.utils.request.post(t,appData).then(function(t){return console.log("[Application.addStorage()] Apps:",t),new e(t)})["catch"](function(e){return console.error("[Application.addStorage()] Error getting apps list: ",e),Promise.reject(e)})}},{key:"applyTemplate",value:function(){y.serverUrl+"/apps/"+this.name+"/template";console.log("Applying templates to existing")}},{key:"user",value:function(e){return new I(e)}},{key:"group",value:function(e){return new j(e)}},{key:"users",get:function(){return new E}},{key:"groups",get:function(){return new A}}]),e}(),M=function(){function e(t){if(_classCallCheck(this,e),!t)throw console.error("Application name is required to start an AppAction"),new Error("Application name is required to start an AppAction");this.name=t}return _createClass(e,[{key:"get",value:function(){return b.utils.request.get(this.appEndpoint).then(function(e){return console.log("[MatterClient.app().get()] App(s) data loaded:",e),new P(e)})["catch"](function(e){return console.error("[MatterClient.app().get()] Error getting apps list: ",e),Promise.reject(e)})}},{key:"update",value:function(e){return b.utils.request.put(this.appEndpoint,e).then(function(e){return console.log("[MatterClient.apps().update()] App:",e),new P(e)})["catch"](function(e){return console.error("[MatterClient.apps().update()] Error updating app: ",e),Promise.reject(e)})}},{key:"del",value:function(e){return b.utils.request["delete"](this.appEndpoint,e).then(function(e){return console.log("[MatterClient.apps().del()] Apps:",e),new P(e)})["catch"](function(e){return console.error("[MatterClient.apps().del()] Error deleting app: ",e),Promise.reject(e)})}},{key:"getFiles",value:function(){return this.get().then(function(e){e.getFiles().then(function(e){return e})["catch"](function(e){return console.error("[MatterClient.app().getFiles()] Error getting application files: ",e),Promise.reject(e)})})["catch"](function(e){return console.error("[MatterClient.app().getFiles()] Error getting application: ",e),Promise.reject(e)})}},{key:"getStructure",value:function(){return this.get().then(function(e){return e.getStructure().then(function(e){return console.log("Structure loaded: ",e),e})["catch"](function(e){return console.error("[MatterClient.app().getStructure()] Error getting application structure: ",e),Promise.reject(e)})})["catch"](function(e){return console.error("[MatterClient.app().getStructure()] Error getting application: ",e),Promise.reject(e)})}},{key:"appEndpoint",get:function(){return b.endpoint+"/apps/"+this.name}}]),e}(),q=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(){return console.warn("matter.utils:",b.utils),b.utils.request.get(this.appsEndpoint).then(function(e){return console.log("[MatterClient.apps().get()] App(s) data loaded:",e),e})["catch"](function(e){return console.error("[MatterClient.apps().get()] Error getting apps list: ",e),Promise.reject(e)})}},{key:"add",value:function(e){return b.utils.request.post(this.appsEndpoint,e).then(function(e){return console.log("[MatterClient.apps().add()] Application added successfully: ",e),new Application(e)})["catch"](function(e){return console.error("[MatterClient.getApps()] Error adding application: ",e),Promise.reject(e)})}},{key:"appsEndpoint",get:function(){return console.log("matter.endpoint is currently:",b.endpoint),b.endpoint+"/apps"}}]),e}(),U=function(){function e(t){_classCallCheck(this,e),this.name=t.name,this.username=t.username,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt}return _createClass(e,[{key:"app",value:function(e){return new M(e)}},{key:"apps",get:function(){return new q}}]),e}(),I=function(){function e(t){if(_classCallCheck(this,e),!t)throw console.error("Username is required to start an UserAction"),new Error("Username is required to start an UserAction");this.username=t}return _createClass(e,[{key:"get",value:function(){return b.utils.request.get(this.userEndpoint).then(function(e){return console.log("[MatterClient.user().get()] App(s) data loaded:",e),new U(e)})["catch"](function(e){return console.error("[MatterClient.user().get()] Error getting users list: ",e),Promise.reject(e)})}},{key:"update",value:function(e){return b.utils.request.put(this.userEndpoint,e).then(function(e){return console.log("[MatterClient.users().update()] App:",e),new U(e)})["catch"](function(e){return console.error("[MatterClient.users().update()] Error updating user: ",e),Promise.reject(e)})}},{key:"del",value:function(e){console.error("Deleting a user is currently disabled.")}},{key:"userEndpoint",get:function(){return b.endpoint+"/users/"+this.username}}]),e}(),S=b.utils.request,T=b.utils.logger,N=function(){function e(t){if(_classCallCheck(this,e),!t)throw T.error({description:"Template name is required to start a TemplateAction",func:"construcotr",obj:""}),new Error("Template name is required to start a TemplateAction");this.name=t}return _createClass(e,[{key:"get",value:function(){return T.log({description:"Get template called.",name:this.name,func:"get",obj:"TemplateAction"}),S.get(this.templateEndpoint).then(function(e){return T.log({description:"Get template responded.",response:e,func:"get",obj:"TemplateAction"}),e})["catch"](function(e){return T.error({description:"Error getting template.",error:e,func:"get",obj:"TemplateAction"}),Promise.reject(e)})}},{key:"update",value:function(e){return T.log({description:"Update template called.",templateData:e,func:"update",obj:"TemplateAction"}),S.put(this.templateEndpoint,e).then(function(t){return T.log({description:"Update template responded.",response:t,templateData:e,func:"update",obj:"TemplateAction"}),t})["catch"](function(e){return T.error({description:"Error updating template.",error:e,func:"update",obj:"TemplateAction"}),Promise.reject(e)})}},{key:"del",value:function(e){return T.log({description:"Delete template called.",templateData:e,func:"del",obj:"TemplateAction"}),S["delete"](this.endpoint,e).then(function(e){return T.log({description:"Template deleted successfully.",response:e,func:"del",obj:"TemplateAction"}),e})["catch"](function(e){return T.error({description:"Error deleting template.",error:e,func:"del",obj:"TemplateAction"}),Promise.reject(e)})}},{key:"templateEndpoint",get:function(){return b.endpoint+"/templates/"+this.name}}]),e}(),_=b.utils.logger,D=b.utils.request,O=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"get",value:function(){return _.log({description:"Get template called.",func:"get",obj:"TemplatesAction"}),D.get(this.templatesEndpoint).then(function(e){return _.log({description:"Templates loaded.",response:e,func:"get",obj:"TemplatesAction"}),e})["catch"](function(e){return _.error({description:"Error getting templates.",error:e,func:"get",obj:"TemplatesAction"}),Promise.reject(e)})}},{key:"add",value:function(e){return _.log({description:"Add template called.",func:"add",obj:"TemplatesAction"}),D.post(this.templatesEndpoint,e).then(function(e){return _.log({description:"Templates added successfully.",func:"add",obj:"TemplatesAction"}),e})["catch"](function(e){return _.error({description:"Error adding template.",error:e,func:"add",obj:"TemplatesAction"}),Promise.reject(e)})}},{key:"search",value:function(t){_.log({description:"Search template called.",query:t,func:"search",obj:"TemplatesAction"});var r=this.templatesEndpoint+"/search/";return t&&e.isString(t)&&(r+=t),_.log({description:"Search endpoint created.",endpoint:r,func:"search",obj:"TemplatesAction"}),D.get(r).then(function(e){return _.log({description:"Template(s) found successfully.",response:e,endpoint:r,func:"search",obj:"TemplatesAction"}),e})["catch"](function(e){return _.log({description:"Error searching for templates.",query:t,error:e,endpoint:r,func:"search",obj:"TemplatesAction"}),Promise.reject(e)})}},{key:"templatesEndpoint",get:function(){return b.endpoint+"/templates"}}]),t}(),G=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,y.appName,y.matterOptions)}return _inherits(t,e),_createClass(t,[{key:"app",value:function(e){return console.log("New AppAction:",new M(e)),new M(e)}},{key:"template",value:function(e){return console.log("New TemplateAction:",new N(e)),new N(e)}},{key:"user",value:function(e){return new I(e)}},{key:"apps",get:function(){return console.log("New AppsAction object:",new q),new q}},{key:"templates",get:function(){return console.log("New TemplatesAction object:",new O),new O}},{key:"users",get:function(){return new E}}]),t}(k);return G});
//# sourceMappingURL=grout.min.js.map